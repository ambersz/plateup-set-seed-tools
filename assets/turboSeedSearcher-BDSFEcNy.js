import{q as M,u as s,g as f}from"./jsxRuntime.module-wfZfYPmn.js";import{U as h,R as P,h as v,p as _,a as d,D as w}from"./unlocks-Gx_wR1Yr.js";import{U as A}from"./UnlockSelect-8NUdvTgn.js";import{u as p}from"./usePersistentState-R_WhJCF8.js";import"./compat.module-qsrks2fs.js";h.filter(t=>t.Name==="Cakes")[0];const C=[],I=1;for(let t=0;t<I;t++)C.push(new Worker(new URL("/plateup-set-seed-tools/assets/seedSearchWorker-vmBblPfk.js",import.meta.url),{type:"module"}));function m(t){for(const a of C)a.postMessage(t)}const g=[{include:!0,cards:[P.filter(t=>t.Name==="Turbo")[0]]}],U={include:!0,cards:["Ice Cream","Instant Service","All You Can Eat","Victorian Standards","Sedate Atmosphere","Roast Potato","Broccoli","Bamboo","Mashed Potato","Chips","Corn on the Cob","Onion Rings"].flatMap(t=>h.filter(a=>a.Name===t))},W={include:!1,cards:["Apple Pie","Cherry","Pumpkin","Leisurely","Mandarin","Bread","Closing Time","Picky","Medium","Advertising","Cheese ","Soup"].flatMap(t=>h.filter(a=>a.Name.includes(t)))};{let t=1;for(;t<=9;t++)g[t]=t===5?{include:!0,cards:h.filter(a=>a.Name==="Affordable")}:U;for(;t<=14;t++)g[t]=W}const G=()=>{const[t,a]=v(0),[S,y]=p([],"SEED_SEARCHER_RESULTS"),[b,u]=v(!1),[l,k]=p([1,2,3,4],"SEED_SEARCHER_ALLOWED_TABLES"),R=[1,2,3,4];_(()=>{console.log("useEffect registering message done");const e=r=>{const o=r;switch(o.data.type){case"error":break;case"result":const i=o.data.data;y(c=>(c.length>=1/0&&(m({type:"stop"}),u(!1)),[...c,i]));break;case"progress":a(o.data.data);break}};for(const r of C)r.onmessage=e},[]);const E=[];for(let e=1;e<=14;e++)E.push(e);const B=()=>{if(b)m({type:"stop"}),u(!1);else{if(n[0].cards.length<2){alert("No starting dish selected.");return}else n[0].cards.length>2;const e=[];for(let r=1;r<15;r++)(!n[r]||n[r].include&&n[r].cards.length===0)&&e.push(r);if(e.length){e.length>1&&(e[e.length-1]="and "+e[e.length-1]),alert(`Empty card configurations for day${e.length>1?"s":""} `+e.join(e.length>2?", ":" ")+". Add cards, or switch to exclude cards mode.");return}m({type:"start",data:{mapSizes:l,goalCards:n,goalAppliances:L}}),u(!0)}},[n,T]=p(g,"SEED_SEARCHER_CARDS_BY_DAY"),D=e=>r=>{T(o=>{var c;const i=[...o];return e===0&&((c=r.cards[0])==null?void 0:c.Name)!=="Turbo"&&r.cards.splice(0,0,i[e].cards[0]),i[e]=r,i})},N=e=>()=>{l.includes(e)?k(l.filter(r=>r!==e)):k([...l,e])};return s(f,{children:[s("div",{style:{maxWidth:"50vw"},children:"When more than one starting dish is selected, the searcher will alternate among all of them"}),s("div",{style:{maxWidth:"50vw"},children:["On include/green card mode, the searcher prioritizes the cards which were added first (e.g. if a seed offers Ice Cream and Herd Mentality on Day N, and Ice Cream is before Herd Mentality in the card list for Day N, the searcher will ",s("i",{children:"always"})," choose Ice Cream.)"]}),s("div",{class:"search-container",children:[s("div",{class:"search-config",children:[s("div",{style:"min-width:fit-content;",children:[s("label",{children:"Starting Tables: "}),R.map(e=>{const r=e+"-table";return s(f,{children:[s("label",{for:r,children:e}),s("input",{id:r,type:"checkbox",onChange:N(e),checked:l.includes(e)})]})})]}),s(f,{children:[s(A,{onSelectionChange:D(0),showSelectionMode:!1,label:"Starting Cards",...n[0],unlockGroupFilter:[d.Dish],dishTypeFilter:[w.Null,w.Base]}),E.map(e=>s(A,{onSelectionChange:D(e),label:"After Day "+e,...n[e]??{},unlockGroupFilter:e===5?[d.PrimaryTheme]:[d.Generic,d.Dish]}))]})]}),s("div",{class:"search-results",children:[s("div",{children:[t," seeds checked"]}),s("button",{onClick:B,children:[b?"Stop":"Start"," Search"]}),s("div",{class:"results",children:[S.length?s("button",{onClick:()=>y([]),children:"Clear Previous Results"}):"",S.map(e=>s("div",{children:[e.seed,e.mapSize&&` (${e.mapSize})`,":"," ",s("div",{children:e.cards.join(", ")}),e.blueprints.map(r=>r.Name).join(", ")]}))]})]})]})]})};M(s(G,{}),document.getElementById("app"));const L=[];
