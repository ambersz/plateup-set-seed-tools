import{A as S,d as v}from"./branchingRerolls-chynz_8-.js";import{U as R}from"./UnlockSelect-RSBuAXyM.js";import{T as y,_ as k,p as B,u as e}from"./main-nVfmSndt.js";import{u as g}from"./usePersistentState-MhNDfNJZ.js";import"./GhostBlueprints-_y5Up0kp.js";function D(s,l){s.postMessage(l)}const w={"Grabber - Rotating":["Grabber","Smart Grabber"],Grabber:["Conveyor","Grabber - Rotating"],Freezer:["Counter"],Workstation:["Counter"],"Frozen Prep Station":["Prep Station"],"Rapid Mixer":["Mixer","Conveyor Mixer"],"Heated Mixer":["Rapid Mixer"],"Conveyor Mixer":["Heated Mixer"],Bin:["Affordable Bin"],"Compactor Bin":["Expanded Bin","Bin"],"Composter Bin":["Compactor Bin","Bin"],"Expanded Bin":["Composter Bin","Bin"],"Metal Table":["Dining Table"],"Table - Simple Cloth":["Dining Table"],"Power Sink":["Soaking Sink"],"Danger Hob":["Safety Hob","Hob"],"Safety Hob":["Hob","Danger Hob"],Microwave:["Oven"],"Robot Mop":["Fast Mop"],"Robot Buffer":["Floor Buffer"],"Copying Desk":["Research Desk","Discount Desk"],"Discount Desk":["Research Desk","Blueprint Desk"],Teleporter:["Dumbwaiter"],"Soaking Sink":["Sink","Dish Washer"]},H=({})=>{const[s,l]=g(v,"BRANCH_CONFIG",t=>{if(typeof t.simpleBPSettings=="boolean"){debugger;return{...t,simpleBPSettings:t.simpleBPSettings?"insideOnly":"full"}}return t}),[u,b]=g([[]],"RIG_TIERS"),[c,f]=g(1,"RIG_PLAYER_COUNT"),[m,d]=g("","RIG_RESULT"),C=y(t=>{d(t.data)},[]),r=k();B(()=>{r.current===void 0&&(r.current=new Worker(new URL("/plateup-set-seed-tools/assets/autoRigWorker-eFvAgImv.js",import.meta.url),{type:"module"})),r.current.onmessage=C},[]);const o=t=>{D(r.current,{config:s,tiers:t,playerCount:c})};return e("div",{children:[e("label",{for:"playerCount",children:"Player Count"}),e("input",{id:"playerCount",defaultValue:c.toString(),type:"number",onChange:t=>{const i=t.target;f(Number(i.value))}}),e(M,{onConfigChange:l,config:s}),u.map((t,i)=>e(S,{shopModifiersOnly:!1,appliances:t,allowDupes:!0,onSelectionChange:a=>{b(p=>{const n=[...p];n.splice(i,1,a);let h=n.length;for(;h--&&!n[h].length;)n.pop();return n.push([]),n})}})),e("button",{onClick:()=>{const t=u.map(i=>{let a={};for(const n of i)a[n.Name]||(a[n.Name]=0),a[n.Name]++;let p=[];for(const[n,h]of Object.entries(a))p.push({goal:n,substitutes:w[n]??[],number:h});return p});o(t)},children:"Route Rig"}),e("div",{children:m.split(`
`).map(t=>e("div",{children:t}))})]})},M=({onConfigChange:s,config:l})=>{const{seed:u,blueprintCount:b,solo:c,cards:f,searchDepth:m,simpleBPSettings:d=!1}=l,C=o=>{let t={...l};o.target.checked?(t.blueprintCount=7,t.baseUpgradeChance=.25):(t.blueprintCount=5,t.baseUpgradeChance=0),s(t)},r=(o,t)=>{let i={...l};i[o]=t,s(i)};return e("div",{children:[e("div",{children:[e("div",{children:"Run Config:"}),e("label",{for:"solo",children:"Solo:"}),e("input",{type:"checkbox",id:"solo",checked:c,onChange:()=>{r("solo",!c)}}),e("span",{style:"margin:0 20px",children:[e("label",{for:"simpleRerollSettings",children:"Spawn setting configs: "}),e("select",{value:d===!0?"insideOnly":d===!1?"full":d,onChange:o=>{var t;r("simpleBPSettings",((t=o.target)==null?void 0:t.value)??"full")},children:[e("option",{value:"full",children:"All spawn settings"}),e("option",{value:"insideOnly",children:"Spawn Inside only"}),e("option",{value:"noSwitching",children:"Don't switch bp settings after spawn"})]})]}),e("div",{children:[e("label",{for:"searchDepth",children:"Number of Rerolls"})," ",e("input",{id:"searchDepth",type:"number",value:m,onChange:o=>{r("searchDepth",Number(o.target.value))}})]}),e("label",{for:"seed",value:u,children:["Seed:"," "]}),e("input",{type:"text",id:"seed",value:u,disabled:!0,onChange:o=>{r("seed",o.target.value)}}),e("label",{for:"setting",children:" Turbo?"}),e("input",{id:"setting",type:"checkbox",disabled:!0,checked:b===7,onChange:C})]}),e("div",{children:e(R,{id:"cardSchedule",onSelectionChange:()=>{},showSelectionMode:!1,cards:f,include:!0,modes:["themes","dishes","customerCards"]})})]})};export{H as default};
