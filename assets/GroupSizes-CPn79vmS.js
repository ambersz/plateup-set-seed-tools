import{defaultBranchingRerollConfig as G}from"./branchingRerolls-D8Ve4S4a.js";import{u as k}from"./usePersistentState-HjpLCYar.js";import{u as w,b as e,g as I,R as N,r as j}from"./main-Cyodgag4.js";import{R as x}from"./run-Bd5IUxrP.js";import"./GhostBlueprints-DFpQBR6X.js";const O=(u,r)=>{let l=1e4;const s=Math.min(l-1,Math.floor(l*r));let i=[];for(;l--;){const a=_(u);for(let o=0;o<a.length;o++)i[o]||(i[o]=[]),i[o].push(a[o])}return i.map(a=>(a.sort((o,m)=>o-m),a[s]))},_=u=>{let r=0,l=[];for(let s=0;s<=15;s++){const i=u.simulateMoney(s);r+=i,l.push(r)}return l},V=()=>{var B;const u=w(.01),[r,l]=k(G,"BRANCH_CONFIG",t=>{if(typeof t.simpleBPSettings=="boolean"){debugger;return{...t,simpleBPSettings:t.simpleBPSettings?"insideOnly":"full"}}return t}),[s,i]=k(1,"RIG_PLAYER_COUNT"),y=w(),a=[e(I,{})],o=[],m=r.cards.filter(t=>!N.some(h=>h.Name===t.Name)),M=r.cards.filter(t=>N.some(h=>h.Name===t.Name));m.length&&M.push(m[0]);const D=m.slice(1),g=new x(r.seed,M,D),A=()=>{const t=O(g,u.value);y.value=t};g.playerCount=s;let v=0,b=g.guessMoney(0),p=2,f=60;for(let t=0;t<p;t++)f+=10*(t+1);f+=460/2;let S=0,d=[];for(let t=1;t<=15;t++){const h=g.getGroupSizes(t),P=h.reduce((C,n)=>C+n);v+=P;const R=g.guessMoney(t);b+=R;{d.sort((n,c)=>c-n);let C=3;d.length>8&&(C+=3);for(let n=0;n<Math.min(d.length,C);n++)d[n]=Math.ceil(d[n]/2);if(f+=d.reduce((n,c)=>n+c,0),S+=d.length,t!==5){let n=b-f;for(;n>0;){let c=(p+1)*10;if(c+=10,p%8||(c+=60),c>n)break;p++,d.push(30),f+=c,n-=c}}}const F=g.getBookingDeskMoney(t)*g.getBookingDeskCount(t);o.push({i:t,groupSizes:h,customers:P,bookingDeskMoney:F,todayMoney:R,cumulativeFlowers:S,flowers:d,cumulativeMoney:b,simulatedBudget:(B=y==null?void 0:y.value)==null?void 0:B[t]})}for(const t of o)a.push(e(z,{...t}));return e("div",{children:[e("label",{for:"playerCount",children:"Player Count"}),e("input",{id:"playerCount",defaultValue:s.toString(),type:"number",onChange:t=>{const h=t.target;i(Number(h.value))}}),e(j,{onConfigChange:l,config:r,mode:"cards"}),e("div",{children:["Total Customers: ",v]}),e("table",{children:[e("thead",{children:e("tr",{children:[e("td",{children:"Day"}),e("td",{children:"Groups"}),e("td",{children:"Customers"}),e("td",{children:"Booking Desk Money"}),e("td",{children:"Average Money"}),e("td",{children:"Cumulative Money"}),e("td",{children:["Simulated Budget Under Percentile:",e("br",{})," (10k simulations)",e("br",{}),e("input",{type:"number",style:{width:80},step:.005,min:0,max:1,value:u,onChange:t=>u.value=t.target.valueAsNumber,id:"budgetPercentile"}),e("br",{}),e("button",{onClick:A,children:"Run Simulation"})]}),!1,e("td",{children:"All Groups"})]})}),e("tbody",{children:a})]})]})},z=({i:u,groupSizes:r,customers:l,bookingDeskMoney:s,todayMoney:i,cumulativeFlowers:y,flowers:a,cumulativeMoney:o,simulatedBudget:m})=>e("tr",{children:[e("td",{children:u}),e("td",{children:r.length}),e("td",{children:l}),e("td",{children:s}),e("td",{children:Math.round(i)}),e("td",{children:Math.round(o)}),e("td",{children:m}),!1,e("td",{children:r.join(",")})]});export{V as default};
