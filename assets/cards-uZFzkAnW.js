var C=Object.defineProperty;var U=(i,e,r)=>e in i?C(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var p=(i,e,r)=>U(i,typeof e!="symbol"?e+"":e,r);import{f as v,i as u,j as h,D as G}from"./main-CpO9Gw3m.js";class m{constructor(){p(this,"encourageGroups",[u.Special])}GetOptions(e,r,t){const n=t.random;let s=0;for(r!==15&&(s=this.getPad(e,r));s--;)n.value;let f=this.sortCandidates(e,r,t.random);const[d,c]=this.getUnlockGroups(r);let o=null,a=null;for(const l of f)if(!(l.UnlockGroup!==d&&l.UnlockGroup!==c)&&(o===null||o.UnlockGroup!==d&&l.UnlockGroup===d?o=l:(a===null||a.UnlockGroup!==c&&l.UnlockGroup===c)&&(a=l),o&&o.UnlockGroup===d&&a&&a.UnlockGroup===c))break;return[o,a]}getPad(e,r){if(r===15)return 0;let t=h(e).length+1;return r===5&&(t*=2),t}getCandidates(e,r){return h(e)}sortCandidates(e,r,t){let n=this.getCandidates(e,r),s=P(n,t);return t.valueFloat<.5&&s.sort((d,c)=>{let o=0;return k(d)&&o--,k(c)&&o++,o}),s}getUnlockGroups(e){return e===15?[u.Franchise,u.Franchise]:e===5?[u.PrimaryTheme,u.PrimaryTheme]:[u.Dish,u.Generic]}}class T extends m{getPad(e,r){let t=h(e,!1).length+1;return r!==5&&(t*=2),t}sortCandidates(e,r,t){let n=this.getCandidates(e,r),s=P(n,t);return t.valueFloat<.1&&s.sort((c,o)=>{let a=0;return c.Requires.length&&a--,o.Requires.length&&a++,a}),s}}class y extends m{constructor(){super(...arguments);p(this,"ThanksgivingCards",["Turkey","Nut Roast"])}getPad(r,t){if(t===15)return 0;let n=h(r,!1).length+1;if(t===5){let s=h(r);n+=s.length+2}return n}getCandidates(r,t){return t===5||t===15?h(r,!1):h(r)}sortCandidates(r,t,n){let s=this.getCandidates(r,t),f=P(s,n);return n.valueFloat<.5&&f.sort((o,a)=>{let l=0;return k(o,!1)&&l--,k(a,!1)&&l++,l}),t!==5&&t!==15&&n.valueFloat<.25&&f.sort((a,l)=>{let g=0;return this.ThanksgivingCards.includes(a.Name)&&g++,this.ThanksgivingCards.includes(l.Name)&&g--,g}),f}getUnlockGroups(r){return r===15?[u.Franchise,u.Franchise]:r===5?[u.PrimaryTheme,u.PrimaryTheme]:[u.Dish,u.Dish]}}function P(i,e){return i.map(t=>[t,e.valueFloat]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}class x{constructor(e){p(this,"cards");p(this,"unlockPack");p(this,"seed");this.cards=[],this.unlockPack=new m,this.seed=e}addCard(e){if(e!==void 0){switch(e.Name){case"Community":this.unlockPack=new y;break;case"Turbo":this.unlockPack=new T;break}this.cards.push(e)}}getUnlockOptions(e){const t=v(848292,e,this.seed).useSubcontext(1);return this.unlockPack.GetOptions(this.cards,e,t)}getCustomers(e,r=1){return[]}getGroupSizeRange(e){if(this.cards.some(s=>s.Name==="Community")){const s=Math.floor((e-1)/3);return[s+1,s+2]}let t=1,n=2;return this.cards.some(s=>s.Name==="Individual Dining")?[1,1]:(this.cards.some(s=>s.Name==="Medium Groups")&&(t++,n+=2),this.cards.some(s=>s.Name==="Large Groups")&&(t+=2,n+=4),this.cards.some(s=>s.Name==="Flexible Groups")&&(t--,n++),[t,n])}}function k(i,e=!0){return i.UnlockGroup===u.Special||i.DishType===G.Main||i.DishType===G.Extra?!0:e?!!i.Requires.length:!1}export{x as F};
