import{U as d,R as v,h as u,p as _,u as r,g as f,a as A}from"./main-DAguCJPX.js";import{u as m}from"./usePersistentState-0gGw1jhM.js";import{S as H}from"./SeedSearchResult-CFxbyfw8.js";import{t as I}from"./run-B7_2B4-S.js";d.filter(s=>s.Name==="Cakes")[0];const C=[],W=1;for(let s=0;s<W;s++)C.push(new Worker(new URL("/plateup-set-seed-tools/assets/seedSearchWorker-DuVG01NZ.js",import.meta.url),{type:"module"}));function g(s){for(const a of C)a.postMessage(s)}const p=[{include:!0,cards:[v.filter(s=>s.Name==="Turbo")[0]]}],M={include:!0,cards:["Ice Cream","Instant Service","All You Can Eat","Victorian Standards","Sedate Atmosphere","Roast Potato","Broccoli","Bamboo","Mashed Potato","Chips","Corn on the Cob","Onion Rings"].flatMap(s=>d.filter(a=>a.Name===s))},x={include:!1,cards:["Apple Pie","Cherry","Pumpkin","Leisurely","Mandarin","Bread","Closing Time?","Picky","Medium","Advertising","Cheese ","Soup"].flatMap(s=>d.filter(a=>a.Name.includes(s)))};{let s=1;for(;s<=9;s++)p[s]=s===5?{include:!0,cards:d.filter(a=>a.Name==="Affordable")}:M;for(;s<=14;s++)p[s]=x}const z=()=>{const[s,a]=u(0),[S,y]=m([],"SEED_SEARCHER_RESULTS"),[b,h]=u(!1),[o,k]=m(["Diner (1)","Small (2)","Medium (2)","Large (3)","Huge (4)"],"SEED_SEARCHER_ALLOWED_TABLES",e=>e.flatMap(t=>{if(typeof t=="number")switch(t){case 1:return"Diner (1)";case 2:return["Medium (2)","Small (2)"];case 3:return"Large (3)";case 4:return"Huge (4)"}return t}));_(()=>{console.log("useEffect registering message done");const e=t=>{const l=t;switch(l.data.type){case"error":break;case"result":const c=l.data.data;y(i=>(i.length>=1/0&&(g({type:"stop"}),h(!1)),[...i,c]));break;case"progress":a(l.data.data);break}};for(const t of C)t.onmessage=e},[]);const w=[];for(let e=1;e<=14;e++)w.push(e);const N=()=>{if(b)g({type:"stop"}),h(!1);else{if(n[0].cards.length<2){if(!confirm("No starting dish selected. Run search anyway? (If you're doing that ridiculous no food run ðŸ¤£)"))return}else n[0].cards.length>2;const e=[];for(let t=1;t<15;t++)(!n[t]||n[t].include&&n[t].cards.length===0)&&e.push(t);if(e.length){e.length>1&&(e[e.length-1]="and "+e[e.length-1]),alert(`Empty card configurations for day${e.length>1?"s":""} `+e.join(e.length>2?", ":" ")+". Add cards, or switch to exclude cards mode.");return}g({type:"start",data:{mapSizes:o,goalCards:n,goalAppliances:U}}),h(!0)}},[n,D]=m(p,"SEED_SEARCHER_CARDS_BY_DAY"),E=e=>t=>{D(l=>{var i;const c=[...l];return e===0&&((i=t.cards[0])==null?void 0:i.Name)!=="Turbo"&&t.cards.push(v.filter(L=>L.Name==="Turbo")[0]),c[e]=t,c})},[R,B]=u(M),P=e=>{const t=[...n];t[e]={include:R.include,cards:[...R.cards]},D(t)},T=e=>()=>{o.includes(e)?k(o.filter(t=>t!==e)):k([...o,e])};return r(f,{children:[r("div",{style:{maxWidth:"50vw"},children:"When more than one starting dish is selected, the searcher will alternate among all of them"}),r("div",{style:{maxWidth:"50vw"},children:["On include/green card mode, the searcher prioritizes the cards which were added first (e.g. if a seed offers Ice Cream and Herd Mentality on Day N, and Ice Cream is before Herd Mentality in the card list for Day N, the searcher will ",r("i",{children:"always"})," choose Ice Cream.)"]}),r("div",{class:"search-container",children:[r("div",{class:"search-config",children:[r("div",{style:"min-width:fit-content;",children:[r("label",{children:"Map Layout: "}),I.map(e=>{const t=e+"-table";return r(f,{children:[r("label",{for:t,children:e}),r("input",{id:t,type:"checkbox",onChange:T(e),checked:o.includes(e)})]})})]}),r(f,{children:[r(A,{onSelectionChange:E(0),id:0,showSelectionMode:!1,label:"Starting Cards",...n[0],modes:["startingDishes","settings"]}),w.map(e=>r(A,{onSelectionChange:E(e),label:"After Day "+e,id:e,showCopyPaste:e!==5,handleCopy:B,handlePaste:()=>P(e),...n[e]??{},modes:e===5?["themes"]:["unlocks"]}))]})]}),r("div",{class:"search-results",children:[r("div",{children:[s," seeds checked"]}),r("button",{onClick:N,children:[b?"Stop":"Start"," Search"]}),r("div",{class:"results",children:[S.length?r("button",{onClick:()=>y([]),children:"Clear Previous Results"}):"",r("div",{children:r("code",{children:"seed | layout (tables): cards"})}),S.map(e=>r(H,{turbo:!0,result:e}))]})]})]})]})},U=[];export{z as default};
