import{q as O,u as s,g as C}from"./jsxRuntime.module-wfZfYPmn.js";import{h as R,p as M,a as i,D}from"./unlocks-Gx_wR1Yr.js";import{U as A}from"./UnlockSelect-8NUdvTgn.js";import{u as d}from"./usePersistentState-R_WhJCF8.js";import"./compat.module-qsrks2fs.js";const f=[],N=1;for(let n=0;n<N;n++)f.push(new Worker(new URL("/plateup-set-seed-tools/assets/seedSearchWorker-vmBblPfk.js",import.meta.url),{type:"module"}));function g(n){for(const h of f)h.postMessage(n)}const _=[];for(let n=0;n<12;n++)_.push({include:n!==6&&n!==11,cards:[]});const G=()=>{const[n,h]=R(0),[u,T]=d(!1,"SEED_SEARCHER_NORMAL_OT15"),[S,m]=d([],"SEED_SEARCHER_NORMAL_RESULTS"),[y,p]=R(!1),[a,E]=d([1,2,3,4],"SEED_SEARCHER_NORMAL_ALLOWED_TABLES"),v=[1,2,3,4];M(()=>{console.log("useEffect registering message done");const e=t=>{const l=t;switch(l.data.type){case"error":break;case"result":const c=l.data.data;m(k=>(k.length>=1/0&&(g({type:"stop"}),p(!1)),[...k,c]));break;case"progress":h(l.data.data);break}};for(const t of f)t.onmessage=e},[]);const o=u?[3,5,6,9,12,15,18,21,24,27]:[3,5,6,9,12],w=()=>{if(y)g({type:"stop"}),p(!1);else{if(r[0].cards.length<1){alert("No starting dish selected.");return}else r[0].cards.length>2;const e=[];for(let t=1;t<o.length;t++)(!r[t]||r[t].include&&r[t].cards.length===0)&&e.push(o[t]);if(e.length){e.length>1&&(e[e.length-1]="and "+e[e.length-1]),alert(`Empty card configurations for day${e.length>1?"s":""} `+e.join(e.length>2?", ":" ")+". Add cards, or switch to exclude cards mode.");return}g({type:"start",data:{mapSizes:a,goalCards:r.slice(0,o.length+1),goalAppliances:U}}),p(!0)}},[r,B]=d(_,"SEED_SEARCHER_NORMAL_CARDS_BY_DAY"),b=e=>t=>{B(l=>{const c=[...l];return c[e]=t,c})},L=e=>()=>{a.includes(e)?E(a.filter(t=>t!==e)):E([...a,e])};return s("div",{class:"search-container",children:[s("div",{class:"search-config",children:[s("div",{children:[s("label",{children:"Search until OT15"}),s("input",{type:"checkbox",onChange:()=>{T(!u)},checked:u})]}),s("div",{style:"min-width:fit-content;",children:[s("label",{children:"Starting Tables: "}),v.map(e=>{const t=e+"-table";return s(C,{children:[s("label",{for:t,children:e}),s("input",{id:t,type:"checkbox",onChange:L(e),checked:a.includes(e)})]})})]}),s(C,{children:[s(A,{onSelectionChange:b(0),showSelectionMode:!1,label:"Starting Cards",...r[0],unlockGroupFilter:[i.Dish],dishTypeFilter:[D.Null,D.Base]}),o.map((e,t)=>s(A,{onSelectionChange:b(t+1),label:"After Day "+(e>15?`OT${e-15}`:e),...r[t+1]??{},unlockGroupFilter:e===5?[i.PrimaryTheme]:[i.Generic,i.Dish]}))]})]}),s("div",{class:"search-results",children:[s("div",{children:[n," seeds checked"]}),s("button",{onClick:w,children:[y?"Stop":"Start"," Search"]}),s("div",{class:"results",children:[S.length?s("button",{onClick:()=>m([]),children:"Clear Previous Results"}):"",S.map(e=>s("div",{children:[e.seed," (",e.mapSize,"): ",s("div",{children:e.cards.join(", ")}),e.blueprints.map(t=>t.Name).join(", ")]}))]})]})]})};O(s(G,{}),document.getElementById("app"));const U=[];
