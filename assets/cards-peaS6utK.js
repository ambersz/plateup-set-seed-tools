var U=Object.defineProperty;var C=(i,e,t)=>e in i?U(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>(C(i,typeof e!="symbol"?e+"":e,t),t);import{e as v,f as u,i as d,D as G}from"./main-yNhaPxmU.js";class g{constructor(){p(this,"encourageGroups",[u.Special])}GetOptions(e,t,r){const n=r.random;let s=0;for(t!==15&&(s=this.getPad(e,t));s--;)n.value;let h=this.sortCandidates(e,t,r.random);const[f,c]=this.getUnlockGroups(t);let o=null,a=null;for(const l of h)if(!(l.UnlockGroup!==f&&l.UnlockGroup!==c)&&(o===null||o.UnlockGroup!==f&&l.UnlockGroup===f?o=l:(a===null||a.UnlockGroup!==c&&l.UnlockGroup===c)&&(a=l),o&&o.UnlockGroup===f&&a&&a.UnlockGroup===c))break;return[o,a]}getPad(e,t){if(t===15)return 0;let r=d(e).length+1;return t===5&&(r*=2),r}sortCandidates(e,t,r){let n=d(e),s=P(n,r);return r.valueFloat<.5&&s.sort((f,c)=>{let o=0;return k(f)&&o--,k(c)&&o++,o}),s}getUnlockGroups(e){return e===15?[u.Franchise,u.Franchise]:e===5?[u.PrimaryTheme,u.PrimaryTheme]:[u.Dish,u.Generic]}}class y extends g{getPad(e,t){let r=d(e,!1).length+1;return t!==5&&(r*=2),r}sortCandidates(e,t,r){let n=d(e),s=P(n,r);return r.valueFloat<.1&&s.sort((c,o)=>{let a=0;return c.Requires.length&&a--,o.Requires.length&&a++,a}),s}}class T extends g{constructor(){super(...arguments);p(this,"ThanksgivingCards",["Turkey","Nut Roast"])}getPad(t,r){if(r===15)return 0;let n=d(t,!1).length+1;if(r===5){let s=d(t);n+=s.length+2}return n}sortCandidates(t,r,n){let s=r===5||r===15?d(t,!1):d(t),h=P(s,n);return n.valueFloat<.5&&h.sort((o,a)=>{let l=0;return k(o,!1)&&l--,k(a,!1)&&l++,l}),r!==5&&r!==15&&n.valueFloat<.25&&h.sort((a,l)=>{let m=0;return this.ThanksgivingCards.includes(a.Name)&&m++,this.ThanksgivingCards.includes(l.Name)&&m--,m}),h}getUnlockGroups(t){return t===15?[u.Franchise,u.Franchise]:t===5?[u.PrimaryTheme,u.PrimaryTheme]:[u.Dish,u.Dish]}}function P(i,e){return i.map(r=>[r,e.valueFloat]).sort((r,n)=>r[1]-n[1]).map(r=>r[0])}class x{constructor(e){p(this,"cards");p(this,"unlockPack");p(this,"seed");this.cards=[],this.unlockPack=new g,this.seed=e}addCard(e){if(e!==void 0){switch(e.Name){case"Community":this.unlockPack=new T;break;case"Turbo":this.unlockPack=new y;break}this.cards.push(e)}}getUnlockOptions(e){const r=v(848292,e,this.seed).useSubcontext(1);return this.unlockPack.GetOptions(this.cards,e,r)}getCustomers(e,t=1){return[]}getGroupSizeRange(e){if(this.cards.some(s=>s.Name==="Community")){const s=Math.floor((e-1)/3);return[s+1,s+2]}let r=1,n=2;return this.cards.some(s=>s.Name==="Individual Dining")?[1,1]:(this.cards.some(s=>s.Name==="Medium Groups")&&(r++,n+=2),this.cards.some(s=>s.Name==="Large Groups")&&(r+=2,n+=4),this.cards.some(s=>s.Name==="Flexible Groups")&&(r--,n++),[r,n])}}function k(i,e=!0){return i.UnlockGroup===u.Special||i.DishType===G.Main||i.DishType===G.Extra?!0:e?!!i.Requires.length:!1}export{x as F};
