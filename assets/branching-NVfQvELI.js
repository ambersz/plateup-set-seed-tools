import{u as e,q as A,g as P}from"./jsxRuntime.module-AOkfKomP.js";import{A as x,S as O}from"./shop-tJeXwCUC.js";import{G as $}from"./GhostBlueprints-8APuD-zf.js";import{u as N,a as y,U as K}from"./UnlockSelect-m-khYAxX.js";import{h as U,F as V}from"./compat.module-HTaeRODX.js";import{V as L}from"./Version-kAkmOHMg.js";import{u as G}from"./usePersistentState-lBo1WcYU.js";import"./prng-1rWzft78.js";import"./unlocks-8mfgXCLy.js";const M=[...x];function q(n,o,d){const l=o.toLowerCase();return M.filter(function(s){return!n.some(u=>u.ID===s.ID)&&s.Name.toLowerCase().includes(l)&&(!d||s.StapleWhenMissing||s.SellOnlyAsUnique)}).sort((t,s)=>t.Name<s.Name?-1:1)}function E({onSelectionChange:n,label:o,placeholder:d,include:l=!0,appliances:t=[],stapleRelatedOnly:s=!0}){const[u,C]=U(""),b=V(()=>q(t,u,s),[t,u]),{getSelectedItemProps:S,getDropdownProps:g,removeSelectedItem:i}=N({selectedItems:t,onStateChange({selectedItems:p,type:a}){switch(a){case N.stateChangeTypes.SelectedItemKeyDownBackspace:case N.stateChangeTypes.SelectedItemKeyDownDelete:case N.stateChangeTypes.DropdownKeyDownBackspace:case N.stateChangeTypes.FunctionRemoveSelectedItem:n(p??[]);break}}}),{isOpen:c,getToggleButtonProps:m,getLabelProps:w,getMenuProps:k,getInputProps:f,highlightedIndex:D,getItemProps:r,selectedItem:I}=y({items:b,itemToString(p){return p?p.Name:""},defaultHighlightedIndex:0,selectedItem:null,inputValue:u,stateReducer(p,a){const{changes:h,type:v}=a;switch(v){case y.stateChangeTypes.InputKeyDownEnter:case y.stateChangeTypes.ItemClick:return{...h,isOpen:!0,highlightedIndex:0};default:return h}},onStateChange({inputValue:p,type:a,selectedItem:h}){switch(a){case y.stateChangeTypes.InputKeyDownEnter:case y.stateChangeTypes.ItemClick:case y.stateChangeTypes.InputBlur:h&&(n([...t,h]),C(""));break;case y.stateChangeTypes.InputChange:C(p??"");break}}});return e("div",{className:"combo-container",children:[e("div",{className:"",children:[e("label",{className:"",...w(),children:o??"Select desired cards"}),e("div",{className:"",children:[t.map(function(a,h){return e("span",{className:"selected-items"+(l?" include":" exclude"),...S({selectedItem:a,index:h}),children:[a.Name,e("span",{class:"x",onClick:v=>{v.stopPropagation(),i(a)},children:"âœ•"})]},`selected-item-${h}`)}),e("div",{className:"",children:e("input",{placeholder:d??"Card Selection(s)",className:"",...f(g({preventKeyAction:c}))})})]})]}),e("ul",{className:`dropdown ${c&&b.length?"":"hidden"}`,...k(),children:[!1,c&&b.map((p,a)=>e("li",{className:F(D===a&&"bg-blue-300",I===p&&"font-bold","py-2 px-3 shadow-sm flex flex-col"),...r({item:p,index:a}),children:e("span",{children:p.Name})},`${p.ID}${a}`))]})]})}const F=(...n)=>n.filter(o=>o).join(" ");function H(n){let o="";if(!n.length)o="Spawn: any settings";else{for(let l=0;l<n.length;l++){const t=n[l];let s=l?`Reroll ${l}`:"Spawn";s+=": ",s+="Blueprints "+(t.spawnInside?"Spawn Inside":"Spawn Outside, "+(t.playerInside?"Someone Inside":"All Players Stand Outside")),l&&(s+=`, reroll ${n[l].blueprintCount} blueprints`),o+=s+`
`}o+=`Reroll ${n.length}: any settings`}const d=o.split(`
`);return e("div",{class:"reroll-instructions",onClick:l=>{if(l.detail<2)return;const t=document.createRange();t.selectNodeContents(l.currentTarget);const s=document.getSelection();s==null||s.removeAllRanges(),s==null||s.addRange(t)},children:d.map(l=>e("div",{children:l}))})}const _=x.filter(n=>n.Name==="Booking Desk"||n.Name==="Blueprint Cabinet").sort((n,o)=>n.Name<o.Name?1:-1),j=({seed:n,day:o,startingConfig:d=[],baseUpgradeChance:l=0,blueprintCount:t=5,searchDepth:s=2,ghostBlueprints:u=2,blueprintCabinets:C=1,solo:b,cards:S=[],appliances:g=[]})=>{var D;n=n.toLocaleLowerCase().trim();const i={blueprintCount:t+u,spawnInside:!0},c=new O(n,l);for(const r of S)c.addCard(r);c.OwnedAppliances=[...c.OwnedAppliances,...g];const m=[],w=[];for(let r=-C-1;r<=C;r++){const I={spawnInside:!0,blueprintCount:t+r};m.push(I),b||m.push({spawnInside:!1,playerInside:!0,blueprintCount:t+r}),m.push({spawnInside:!1,playerInside:!1,blueprintCount:t+r}),r===0&&(w.push(I),w.push({spawnInside:!1,playerInside:!0,blueprintCount:t+r}),w.push({spawnInside:!1,playerInside:!1,blueprintCount:t+r}))}let k=[],f=[d];for(let r=0;r<=s;r++){let I=[],p=[];for(let a=0;a<f.length;a++){const h={...i};h.blueprintCount=f[a].length?(((D=f[a].at(-1))==null?void 0:D.blueprintCount)??t)+u:t;const v=c.getAppliances([...f[a],h],o).map(R=>R.Name);p.push(e("td",{class:"reroll-cell",colspan:m.length**(s-r),children:[e($,{bps:v,ghostCount:r===0?0:u}),H(f[a])]}));const T=d.length+r===0?w:m;for(const R of T){const B=[...f[a],R];I.push(B)}}k.push(e("tr",{children:[e("td",{children:r?`Reroll ${r}`:"Spawns"}),p]})),f=I}return e("table",{children:[" ",k," "]})},z=({onConfigChange:n,config:o})=>{const{seed:d,day:l,blueprintCount:t,solo:s,appliances:u=_,cards:C,searchDepth:b}=o,S=i=>{let c={...o};i.target.checked?(c.blueprintCount=7,c.baseUpgradeChance=.25):(c.blueprintCount=5,c.baseUpgradeChance=0),n(c)},g=(i,c)=>{let m={...o};m[i]=c,n(m)};return e("div",{children:[e("div",{children:[e("div",{children:"Run Config:"}),e("label",{for:"solo",children:"Solo:"}),e("input",{type:"checkbox",id:"solo",checked:s,onChange:()=>{}}),e("label",{for:"searchDepth",children:"Number of Rerolls"})," ",e("input",{id:"searchDepth",type:"number",value:b,onChange:i=>{g("searchDepth",Number(i.target.value))}}),e("br",{}),e("label",{for:"seed",value:d,children:["Seed:"," "]}),e("input",{type:"text",id:"seed",value:d,onChange:i=>{g("seed",i.target.value)}}),e("label",{for:"setting",children:"Turbo?"}),e("input",{id:"setting",type:"checkbox",checked:t===7,onChange:S})]}),e("div",{children:[e("label",{for:"day",value:l,children:["Prep of Day:"," "]}),e("input",{type:"number",id:"day",value:l,onChange:i=>{g("day",Number(i.target.value))}}),e(K,{label:"Selected cards:",onSelectionChange:i=>{g("cards",i.cards)},showSelectionMode:!1,cards:C,include:!0,modes:["themes","dishes"]}),e(E,{label:"Select owned appliances:",placeholder:"",onSelectionChange:i=>{g("appliances",i)},appliances:u})]})]})},W={seed:"az",day:2,cards:[],initialRerollConfig:[],blueprintCount:5,baseUpgradeChance:0,solo:!1,appliances:[],searchDepth:2},J=()=>{const[n,o]=G(W,"BRANCH_CONFIG");return e(P,{children:[e("div",{children:"Hover over a cell for instructions on how to get those blueprints. Getting the blueprints in grey requires taking extra blueprints out of cabinets"}),e(z,{onConfigChange:o,config:n}),e(j,{...n,blueprintCabinets:1}),!1,e(L,{})]})};A(e(J,{}),document.getElementById("app"));
