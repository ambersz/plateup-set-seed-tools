import{A as S,d as R}from"./branchingRerolls-ztjZaRDi.js";import{U as v}from"./UnlockSelect-zYymzP9E.js";import{T as k,_ as y,p as B,u as e}from"./main-iAfUoZMG.js";import{u as b}from"./usePersistentState-NWSm65om.js";import"./GhostBlueprints-KdRpCnM1.js";function D(s,l){s.postMessage(l)}const w={"Grabber - Rotating":["Grabber","Smart Grabber"],Grabber:["Conveyor","Grabber - Rotating"],Freezer:["Counter"],Workstation:["Counter"],"Frozen Prep Station":["Prep Station"],"Rapid Mixer":["Mixer","Conveyor Mixer"],"Heated Mixer":["Rapid Mixer"],"Conveyor Mixer":["Heated Mixer"],Bin:["Affordable Bin"],"Compactor Bin":["Expanded Bin","Bin"],"Composter Bin":["Compactor Bin","Bin"],"Expanded Bin":["Composter Bin","Bin"],"Metal Table":["Dining Table"],"Table - Simple Cloth":["Dining Table"],"Power Sink":["Soaking Sink"],"Danger Hob":["Safety Hob","Hob"],"Safety Hob":["Hob","Danger Hob"],Microwave:["Oven"],"Robot Mop":["Fast Mop"],"Robot Buffer":["Floor Buffer"],"Copying Desk":["Research Desk","Discount Desk"],"Discount Desk":["Research Desk","Blueprint Desk"],Teleporter:["Dumbwaiter"],"Soaking Sink":["Sink","Dish Washer"]},H=({})=>{const[s,l]=b(R,"BRANCH_CONFIG",t=>{if(typeof t.simpleBPSettings=="boolean"){debugger;return{...t,simpleBPSettings:t.simpleBPSettings?"insideOnly":"full"}}return t}),[c,g]=b([[]],"RIG_TIERS"),[d,f]=b(1,"RIG_PLAYER_COUNT"),[m,a]=b("","RIG_RESULT"),C=k(t=>{a(t.data)},[]),r=y();B(()=>{r.current===void 0&&(r.current=new Worker(new URL("/plateup-set-seed-tools/assets/autoRigWorker-oTVBA4SI.js",import.meta.url),{type:"module"})),r.current.onmessage=C},[]);const o=t=>{D(r.current,{config:s,tiers:t,playerCount:d})};return e("div",{children:[e("label",{for:"playerCount",children:"Player Count"}),e("input",{id:"playerCount",defaultValue:d.toString(),type:"number",onChange:t=>{const i=t.target;f(Number(i.value))}}),e(M,{onConfigChange:l,config:s}),c.map((t,i)=>e(S,{shopModifiersOnly:!1,appliances:t,allowDupes:!0,onSelectionChange:u=>{g(p=>{const n=[...p];n.splice(i,1,u);let h=n.length;for(;h--&&!n[h].length;)n.pop();return n.push([]),n})}})),e("button",{onClick:()=>{const t=c.map(i=>{let u={};for(const n of i)u[n.Name]||(u[n.Name]=0),u[n.Name]++;let p=[];for(const[n,h]of Object.entries(u))p.push({goal:n,substitutes:w[n]??[],number:h});return p});o(t)},children:"Route Rig"}),e("button",{onClick:()=>{a("")},children:"Clear Previous Results"}),e("div",{children:m.split(`
`).map(t=>e("div",{children:t}))})]})},M=({onConfigChange:s,config:l})=>{const{seed:c,blueprintCount:g,solo:d,cards:f,searchDepth:m,simpleBPSettings:a=!1}=l,C=o=>{let t={...l};o.target.checked?(t.blueprintCount=7,t.baseUpgradeChance=.25):(t.blueprintCount=5,t.baseUpgradeChance=0),s(t)},r=(o,t)=>{let i={...l};i[o]=t,s(i)};return e("div",{children:[e("div",{children:[e("div",{children:"Run Config:"}),e("label",{for:"solo",children:"Solo:"}),e("input",{type:"checkbox",id:"solo",checked:d,onChange:()=>{r("solo",!d)}}),e("span",{style:"margin:0 20px",children:[e("label",{for:"simpleRerollSettings",children:"Spawn setting configs: "}),e("select",{value:a===!0?"insideOnly":a===!1?"full":a,onChange:o=>{var t;r("simpleBPSettings",((t=o.target)==null?void 0:t.value)??"full")},children:[e("option",{value:"full",children:"All spawn settings"}),e("option",{value:"insideOnly",children:"Spawn Inside only"}),e("option",{value:"noSwitching",children:"Don't switch bp settings after spawn"})]})]}),e("div",{children:[e("label",{for:"searchDepth",children:"Number of Rerolls"})," ",e("input",{id:"searchDepth",type:"number",value:m,onChange:o=>{r("searchDepth",Number(o.target.value))}})]}),e("label",{for:"seed",value:c,children:["Seed:"," "]}),e("input",{type:"text",id:"seed",value:c,disabled:!0,onChange:o=>{r("seed",o.target.value)}}),e("label",{for:"setting",children:" Turbo?"}),e("input",{id:"setting",type:"checkbox",disabled:!0,checked:g===7,onChange:C})]}),e("div",{children:e(v,{id:"cardSchedule",onSelectionChange:()=>{},showSelectionMode:!1,cards:f,include:!0,modes:["themes","dishes","customerCards"]})})]})};export{M as SeedConfigForm,H as default};
