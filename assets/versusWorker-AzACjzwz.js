var le=Object.defineProperty;var ie=(d,g,b)=>g in d?le(d,g,{enumerable:!0,configurable:!0,writable:!0,value:b}):d[g]=b;var p=(d,g,b)=>(ie(d,typeof g!="symbol"?g+"":g,b),b);(function(){"use strict";var d=(a=>(a[a.Generic=0]="Generic",a[a.Dish=1]="Dish",a[a.PrimaryTheme=3]="PrimaryTheme",a[a.SecondaryTheme=4]="SecondaryTheme",a[a.Franchise=5]="Franchise",a[a.Special=6]="Special",a))(d||{}),g=(a=>(a[a.Base=0]="Base",a[a.Main=1]="Main",a[a.Extra=2]="Extra",a[a.Side=3]="Side",a[a.Starter=4]="Starter",a[a.Dessert=5]="Dessert",a[a.Null=6]="Null",a))(g||{}),b=`373996608,Ice Cream,1,,,,-1533430406,False,False,5,1,2\r
-2075899,Breakfast,1,,,-523839730:-1706154991,380220741:925796718,True,False,0,0,5\r
-1199743580,Breakfast Beans,1,-2075899,,,1807525572:-957949759,False,False,2,1,0\r
1436814208,Breakfast Eggs,1,-2075899,,,961148621,False,False,2,1,0\r
-1998930853,Breakfast Extras,1,-2075899,,,-712909563:-1097889139,False,False,2,1,0\r
-1778969928,Burgers,1,,,1972879238,759552160:380220741:385684499,True,False,0,-2,3\r
965292477,Cheeseburgers,1,-1778969928,,,759552160:380220741:385684499:-117339838,False,False,2,1,0\r
-1091625127,Fresh Patties,1,-1778969928,,,759552160:380220741:961148621:-484165118,False,False,2,1,0\r
1298035216,Burger Toppings,1,-1778969928,,,759552160:380220741:-712909563:385684499:-2042103798,False,False,2,1,0\r
1626323920,Hot Dogs,1,,,1972879238,-1132411297:380220741:1799769627:-965827229,True,False,0,-1,5\r
-278713285,Hot Dog - Mustard,1,1626323920,,,-117356585,False,False,2,1,0\r
1743900205,Fish,1,,,1972879238,-609358791:380220741:-1735137431,True,False,0,1,5\r
-297968808,Crab Cake,1,1743900205,,2087693779:1972879238,380220741:925796718:961148621,True,False,1,1,8\r
243846255,Fish Selection,1,1442262270,,,-609358791,False,False,2,0,0\r
-243820179,Fish Selection,1,274986412,,,-609358791,False,False,2,0,0\r
1442262270,Fish Fillet,1,1743900205,,1972879238:2087693779,380220741,True,False,1,1,5\r
274986412,Oysters,1,1743900205,,2087693779,380220741,True,False,1,1,5\r
-643878280,Spiny Fish,1,1743900205,,2087693779,380220741,True,False,1,1,5\r
-211821608,Apple Pies,1,,,2087693779:1972879238:-523839730,925796718:-266993023:-905438738,False,False,5,1,3\r
-133939790,Pies,1,,,-1706154991:-523839730,925796718:-484165118:-266993023:380220741,True,False,0,1,8\r
-1992316049,Mushroom Pie,1,-133939790,,,-1097889139:925796718:-266993023,False,False,1,1,0\r
-1802123036,Vegetable Pies,1,-133939790,,,925796718:-266993023:-452101383:-1573812073,False,False,1,1,0\r
1570910782,Apple Salad,1,1356267749,,2087693779,1193867305:-712909563:380220741:-905438738:1834063794:-1963699221:961148621,True,False,1,2,8\r
1356267749,Salad,1,,,2087693779,1193867305:-712909563:380220741,True,False,0,-1,5\r
-862637543,Potato Salad,1,1356267749,,2087693779:1972879238,-1963699221:961148621:44541785:-957949759:-2042103798:-266993023,True,False,1,2,8\r
372460604,Salad Toppings,1,1356267749,,,-1434800013:-2042103798,False,False,2,1,0\r
1384317454,Bone-in Steaks,1,-959076098,,1972879238,269523389,True,False,1,1,5\r
-959076098,Steak,1,,,1972879238,-484165118:380220741,True,False,0,0,5\r
-953651922,Steak Sauce - Mushroom,1,-959076098,,,-1097889139:-266993023:-2042103798:-957949759,False,False,2,1,0\r
2074054556,Steak Sauce - Red Wine Jus,1,-959076098,,,-957949759:-2042103798:-266993023:-1353971407,False,False,2,1,0\r
-1192928429,Steak Topping - Mushroom,1,-959076098,,,-1097889139,False,False,2,1,0\r
-851525606,Steak Topping - Tomato,1,-959076098,,,-712909563,False,False,2,1,0\r
1916300984,Thick Cut Steaks,1,-959076098,,1972879238,-1507801323,True,False,1,1,5\r
-1716993344,Thin Cut Steaks,1,-959076098,,1972879238,1800865634,True,False,1,1,5\r
-1653221873,Stir Fry,1,,,2087693779:1972879238,-452101383:-1573812073:380220741:-1201769154:314862254,True,False,0,1,10\r
-204178430,Steak Stir Fry,1,-1653221873,,,-1201769154:314862254:-484165118:-452101383:380220741:-1573812073,False,False,1,1,0\r
1380953991,Broccoli,1,,,1972879238,-1573812073:-957949759:-266993023,False,True,3,1,1\r
-520693398,Chips,1,,,1972879238:2087693779,44541785,False,True,3,1,2\r
364243605,Mashed Potato,1,,,1972879238:2087693779,-957949759:44541785:-266993023,False,True,3,1,1\r
2012685115,Carrot Soup,1,,,1972879238,-266993023:-2042103798:-452101383:-957949759,False,True,4,1,3\r
-997241706,Meat Soup,1,,,1972879238,-484165118:-2042103798:-957949759:-266993023,False,True,4,1,3\r
-233806503,Tomato Soup,1,,,1972879238:2087693779,-712909563:-2042103798:-957949759:-266993023,False,True,4,1,3\r
312770813,Cheese Board,1,,,2087693779,-905438738:235423916:-117339838:1834063794,False,False,5,1,3\r
550743424,Pizza,1,,,2087693779:-1706154991:-523839730,925796718:-1963699221:-117339838:-712909563:380220741,True,False,0,0,5\r
1434421325,Mushroom Pizza,1,550743424,,,925796718:-1963699221:-117339838:-712909563:380220741:-1097889139,False,False,2,1,0\r
-2071275506,Onion Pizza,1,550743424,,,-117339838:925796718:-2042103798:-1963699221:380220741:-712909563,False,False,2,1,0\r
-1745179096,Onion Rings,1,,,1972879238:2087693779,-2042103798:925796718,False,True,3,1,2\r
1642577536,Herd Mentality,0,,,,,False,False,6,0,0\r
-1737101581,Health and Safety,0,,,,,False,False,6,0,0\r
-2040314977,Picky Eaters,0,,,,,False,False,6,0,0\r
73422455,Tipping Culture,0,,,,,False,False,6,0,0\r
1168007081,Corn on the Cob,1,,,1972879238,976574457,False,True,3,1,3\r
400765800,Pumpkin Pies,1,,,2087693779:1972879238:-523839730,-1055654549:925796718,False,False,5,1,3\r
1393945424,Pumpkin Seed,1,,,1972879238,-1055654549,False,True,4,1,3\r
1984233383,Pumpkin Soup,1,,,1972879238,-266993023:-2042103798:-1055654549:-957949759,False,True,4,1,2\r
1838568431,Trick - Nasty Nightmares,6,,,,,False,False,6,1,0\r
61056284,Trick - Risky Reservations,6,,,,,False,False,6,1,0\r
2112990883,Trick - Freak Fires,6,,,,,False,False,6,2,0\r
-1477157706,Trick - Mysterious Messes,6,,,,,False,False,6,1,0\r
-209485820,Trick - Dark Deliberations,6,,,,,False,False,6,1,0\r
83673522,Trick - Spooky Solos,6,,,,,False,False,6,1,0\r
1139286658,Trick - Pyro Patrons,6,,,,,False,False,6,2,0\r
79859072,Trick - Cowardly Customers,6,,,,,False,False,6,1,0\r
-2123879305,Trick - Full of Friends,6,,,,,False,False,6,1,0\r
-1895806374,Trick - Grand Gesture,6,,,,,False,False,6,1,0\r
-1839415999,Trick - Spatial Scares,6,,,,,False,False,6,1,0\r
-269971294,Trick - Frightful Fluff,6,,,,,False,False,6,1,0\r
1892828942,Trick - Immortal Impatience,6,,,,,False,False,6,2,0\r
524188336,Trick - Foggy Food,6,,,,,False,False,6,1,0\r
797208634,Trick - Vanishing Valuables,6,,,,,False,False,6,1,0\r
561747534,Trick - Careful Conveyance,6,,,,,False,False,6,1,0\r
-1921275517,Trick - Tiring Times,6,,,,,False,False,6,1,0\r
319209671,Community,6,,,,,False,False,6,1,0\r
536093200,Nut Roast,1,1551533879,,2087693779:-1706154991,1834063794:380220741:-2042103798,True,False,1,1,5\r
-1405391769,Affogato,1,16318784:373996608,,,-1609758240:-1533430406,False,False,5,1,1\r
1847735819,Bread,1,,,1972879238,925796718:235423916,False,True,4,1,2\r
-1015158173,Broccoli Cheese Soup,1,,,1972879238,-1573812073:-957949759:-117339838:-266993023:-2042103798,False,True,4,1,2\r
12170609,Cherry Pie,1,,,1972879238,148543530:925796718:-266993023,False,False,5,1,3\r
-1289628495,Roast Potato,1,,,1972879238,44541785,False,True,3,1,1\r
1551533879,Turkey,1,,,-1706154991,-1506824829:380220741,True,False,0,1,5\r
-361249036,Christmas Rush,6,,,,,False,False,6,0,0\r
878396172,Christmas Crackers,1,1551533879,,,303858729,False,True,4,1,3\r
1398180456,Turkey - Cranberry Sauce,1,1551533879,,,735786885:-2133205155,False,False,2,1,0\r
-1460640973,Turkey - Gravy,1,1551533879,,,-2042103798:-957949759:-266993023,False,False,2,1,0\r
-1243742384,Turkey - Stuffing,1,1551533879,,,-2042103798:925796718:-266993023,False,False,2,2,0\r
-1273613313,Lucky Gift,6,,,,,False,False,6,1,0\r
-1742801708,Bamboo,1,,,1972879238,-2092567672:-266993023:-957949759,False,True,3,1,2\r
-437161441,Bamboo Stir Fry,1,-1653221873,,,-1201769154:314862254:-2092567672:-452101383:380220741:-1573812073:-957949759:-266993023,False,False,1,1,0\r
-1759612454,Dumpling - Soy Sauce,1,367917843,,,-471813067,False,False,2,1,0\r
367917843,Dumplings,1,,,1972879238:-523839730:2087693779,925796718:-484165118:-452101383:380220741,True,False,0,2,8\r
137627410,Seaweed,1,367917843,,,595306349,False,False,2,1,0\r
1696424557,Mandarin Starter,1,,,,-1210117767,False,True,4,1,2\r
1642878331,Mushroom Stir Fry,1,-1653221873,,,-1097889139:-1573812073:-452101383:380220741:-1201769154:314862254,False,False,1,1,0\r
1064343768,Stir Fry - Soy Sauce,1,-1653221873,,,-471813067,False,False,2,1,0\r
-2106646073,Couples,6,,,,,False,False,6,0,0\r
2028238661,Double Dates,0,-2106646073,,,,False,False,6,0,0\r
587399881,First Dates,0,-2106646073,,,,False,False,6,0,0\r
251686519,Double Brew,0,746549422,,,,False,False,6,0,0\r
2079359756,Slow Brew Coffee,1,746549422:16318784,,,,False,False,6,0,0\r
1103885337,Cake Stand,1,16318784:16318784,,,143484231,False,False,2,1,0\r
16318784,Black Coffee,1,,,-1316622579,-1609758240,False,False,0,-2,1\r
-740215310,Extra Milk,1,16318784,,,120342736,False,False,2,1,0\r
-696561631,Extra Sugar,1,16318784,,,-2133205155,False,False,2,1,0\r
2133632711,Iced Coffee,1,16318784,,-1316622579,-1609758240:801015432,False,False,2,1,2\r
-141282934,Latte,1,16318784,,-1316622579:510796221,-1609758240:120342736,False,False,2,1,2\r
1398671754,Tea,1,16318784,,,-1598460622:1377093570:-762638188:-266993023,False,False,2,1,3\r
1316998108,Sponge Cake,1,1113735761,,,-660310536:961148621:925796718:120342736:-217313684:-2133205155,False,False,5,-1,0\r
1609120418,Brownies,1,1113735761,,,783588616:-2135982034:961148621:925796718:-217313684:-2133205155,False,False,5,-1,0\r
-810134986,Cake Flavour - Coffee,1,1113735761,,-1316622579,-1609758240,False,False,5,1,3\r
-1693098895,Cake Flavour - Lemon,1,1113735761,,2087693779,1470180731,False,False,5,1,3\r
627241196,Cupcake,1,1113735761,,,-315287689:961148621:925796718:120342736:-217313684:-2133205155,False,False,5,-1,0\r
-1166412657,Doughnut,1,1113735761,,,2136474391:961148621:925796718:120342736:-217313684:-2133205155:-1963699221:-957949759,False,False,5,-1,0\r
1113735761,Cakes,0,,,-1706154991:-523839730:1972879238,-1723125645:961148621:925796718:-217313684:-2133205155:783588616,False,False,0,0,3\r
-1501485763,Spaghetti Bolognese,1,1764920765,,1972879238:2087693779,-1541798751:-182748008:-266993023:-957949759:380220741:-712909563,True,False,1,1,5\r
803049136,Lasagne,1,-1501485763:1651927267,,-1706154991:1972879238:-523839730,-2077197906:-1541798751:-215543585:120342736:925796718:-957949759:380220741:-712909563:-1339944542,True,False,1,2,8\r
1651927267,Cheesy Spaghetti,1,1764920765,,1972879238:2087693779,925796718:-182748008:-266993023:-957949759:380220741:120342736:-215543585:-117339838,True,False,1,1,5\r
2055765569,Double Helpings,0,-347199069,,,,False,False,6,1,0\r
-347199069,All You Can Eat,0,,,,,False,False,6,2,0\r
233335391,Personalised Waiting,0,,,,,False,False,6,0,0\r
-1815978981,Closing Time?,0,,,,,False,False,6,0,0\r
-287956430,Leisurely Eating,0,,,,,False,False,6,1,0\r
220354841,Sedate Atmosphere,0,,,,,False,False,6,0,0\r
-37551439,Dinner Rush,0,,1958825350,,,False,False,6,0,0\r
-2112255403,Flexible Dining,0,-1183014556,,,,False,False,6,0,0\r
-1747821833,Individual Dining,0,,-1183014556,,,False,False,6,0,0\r
-523195599,Large Groups,0,-1183014556,,,,False,False,6,0,0\r
-1183014556,Medium Groups,0,,-1747821833,,,False,False,6,0,0\r
165138001,Photographic Memory,0,,,,,False,False,6,0,0\r
-28708234,Empathy,0,,,,,False,False,6,0,0\r
-1617744928,Blindfolded Chefs,0,,,,,False,False,6,0,0\r
1530184692,Instant Service,0,,746549422,,,False,False,6,0,0\r
113582858,Discounts,0,,,,,False,False,6,0,0\r
-913531466,Victorian Standards,0,,,,,False,False,6,0,0\r
-53330922,Lunch Rush,0,,1958825350,,,False,False,6,0,0\r
-491994319,Splash Zone,0,,,,,False,False,6,0,0\r
1151685289,Relaxed Atmosphere,0,,,,,False,False,6,0,0\r
73387665,Advertising,0,1765310572,,,,False,False,6,0,0\r
1765310572,Advertising,0,,,,,False,False,6,0,0\r
2079763934,Morning Rush,0,,1958825350,,,False,False,6,0,0\r
1914014233,Simplicity,0,,,,,False,False,6,0,0\r
-534291083,High Expectations,0,,,,,False,False,6,0,0\r
-957080051,High Standards,0,,1356267749,,,False,False,6,0,0\r
1103452725,High Quality,0,,,,,False,False,6,0,0\r
-1857686620,Affordable,3,,,,,False,False,6,0,0\r
1293847744,Charming,3,,,,,False,False,6,0,0\r
-1323758054,Exclusive,3,,,,,False,False,6,0,0\r
-1641333859,Formal,3,,,,,False,False,6,0,0\r
409052852,Variety,5,,319209671:16318784,,,False,False,6,0,0\r
-1205203705,Careful Accounting,5,,,,,False,False,6,-2,0\r
-947047181,Mandatory Tips,5,,,,,False,False,6,-2,0\r
1298492736,Grabber,5,,,,,False,False,6,-2,0\r
1173444265,Wash Basin,5,,,,,False,False,6,-2,0\r
-1096314451,Savings,5,,,,,False,False,6,-2,0\r
2022427578,Reincarnation,5,,,,,False,False,6,-2,0\r
-401283600,Preparation Time,5,,,,,False,False,6,-2,0\r
-357483693,Double Homework,5,,,,,False,False,6,-2,0\r
868780472,Catalogue,5,,,,,False,False,6,-2,0\r
-1418317596,Coupons,5,,,,,False,False,6,-2,0\r
-98765415,Supplier Error,5,,,,,False,False,6,-2,0\r
1618418478,Bootstrapping,5,,,,,False,False,6,-2,0\r
1543829883,Second Helpings,5,,,,,False,False,6,-2,0\r
-1010143518,Loyal Customer,5,,,,,False,False,6,-2,0\r
-1269806478,High Tech Suppliers,5,,,,,False,False,6,-2,0\r
1818403570,Conveyors,5,,,,,False,False,6,-2,0\r
-1121427945,Coffee Tables,5,,,,,False,False,6,-2,0\r
1101419251,Floor Protectors,5,,,,,False,False,6,-2,0\r
-220105135,Flower Pots,5,,,,,False,False,6,-2,0\r
-178381693,Metal Table,5,,,,,False,False,6,0,0\r
-373772933,Simple Cloth Table,5,,,,,False,False,6,0,0\r
`,U=`-959076098,Steak,1,1972879238,-484165118:380220741,True,False,0,0,5\r
1356267749,Salad,1,2087693779,1193867305:-712909563:380220741,True,False,0,-1,5\r
550743424,Pizza,1,2087693779:-1706154991:-523839730,925796718:-1963699221:-117339838:-712909563:380220741,True,False,0,0,5\r
367917843,Dumplings,1,1972879238:-523839730:2087693779,925796718:-484165118:-452101383:380220741,True,False,0,2,8\r
-1778969928,Burgers,1,1972879238,759552160:380220741:385684499,True,False,0,-2,3\r
1551533879,Turkey,1,-1706154991,-1506824829:380220741,True,False,0,1,5\r
-133939790,Pies,1,-1706154991:-523839730,925796718:-484165118:-266993023:380220741,True,False,0,1,8\r
1743900205,Fish,1,1972879238,-609358791:380220741:-1735137431,True,False,0,1,5\r
1626323920,Hot Dogs,1,1972879238,-1132411297:380220741:1799769627:-965827229,True,False,0,-1,5\r
-2075899,Breakfast,1,-523839730:-1706154991,380220741:925796718,True,False,0,0,5\r
-1653221873,Stir Fry,1,2087693779:1972879238,-452101383:-1573812073:380220741:-1201769154:314862254,True,False,0,1,10\r
16318784,Black Coffee,1,-1316622579,-1609758240,False,False,0,-2,1\r
1113735761,Cakes,0,-1706154991:-523839730:1972879238,-1723125645:961148621:925796718:-217313684:-2133205155:783588616,False,False,0,0,3\r
1764920765,Spaghetti,1,1972879238:2087693779,-182748008:-266993023:-957949759:380220741:-712909563,True,False,0,1,5\r
`;const R=b.trim().split(`\r
`).filter(a=>a).map(a=>{var O,A;const[e,s,r,t,n,l,o,c,i,F,h,u]=a.split(","),m=Number(e),f=Number(r),C=t!=null&&t.length?t.split(":").map(N=>Number(N)):[],k=n.length?n.split(":").map(N=>Number(N)):[],S=l!=null&&l.length?(O=l==null?void 0:l.split(":"))==null?void 0:O.map(N=>Number(N)):[],T=o!=null&&o.length?(A=o==null?void 0:o.split(":"))==null?void 0:A.map(N=>Number(N)):[],y=c==="True",D=i==="True",v=Number(F),w=Number(h),ne=Number(u);return{ID:m,Name:s,UnlockGroup:f,Requires:C,BlockedBy:k,RequiredProcesses:S,IngredientProviders:T,isMain:y,isStarterOrSide:D,DishType:v,CustomerMultiplier:w,DishValue:ne}});function M(a,e=!0){const s=e&&a.some(r=>r.Name==="Community");return R.filter(r=>{if(a.some(t=>t.ID===r.ID)||r.BlockedBy.some(t=>a.some(n=>n.ID===t))||r.Requires.some(t=>!a.some(n=>n.ID===t)))return!1;if(r.isStarterOrSide)if(a.some(t=>t.isMain)){if(a.length&&a[0].DishType===g.Dessert)debugger}else return!1;return!(!s&&r.DishType===g.Base)}).sort((r,t)=>r.ID-t.ID)}[...[{ID:447437163,Name:"Country",UnlockGroup:d.Special,Requires:[],BlockedBy:[],RequiredProcesses:[],IngredientProviders:[],isMain:!1,isStarterOrSide:!1,DishType:g.Null,CustomerMultiplier:0,DishValue:0},{ID:2002876295,Name:"City",UnlockGroup:d.Special,Requires:[],BlockedBy:[],RequiredProcesses:[],IngredientProviders:[],isMain:!1,isStarterOrSide:!1,DishType:g.Null,CustomerMultiplier:0,DishValue:0},{ID:-1864906012,Name:"Alpine",UnlockGroup:d.Special,Requires:[],BlockedBy:[],RequiredProcesses:[],IngredientProviders:[],isMain:!1,isStarterOrSide:!1,DishType:g.Null,CustomerMultiplier:0,DishValue:0},R.filter(a=>a.Name==="Community")[0],{ID:1766067755,Name:"Romantic",UnlockGroup:d.Special,Requires:[],BlockedBy:[],RequiredProcesses:[],IngredientProviders:[],isMain:!1,isStarterOrSide:!1,DishType:g.Null,CustomerMultiplier:0,DishValue:0},{ID:1958825350,Name:"Turbo",UnlockGroup:d.Special,Requires:[],BlockedBy:[],RequiredProcesses:[],IngredientProviders:[],isMain:!1,isStarterOrSide:!1,DishType:g.Null,CustomerMultiplier:0,DishValue:0}]].sort((a,e)=>a.Name<e.Name?-1:1),["Breakfast","Burgers","Hot Dogs","Fish","Pies","Salad","Stir Fry","Pizza","Turkey"].map(a=>R.filter(e=>e.Name===a)[0]),U.trim().split(`\r
`).filter(a=>a).map(a=>{var D,v;const[e,s,r,t,n,l,o,c,i,F]=a.split(","),h=Number(e),u=Number(r),m=t!=null&&t.length?(D=t==null?void 0:t.split(":"))==null?void 0:D.map(w=>Number(w)):[],f=n!=null&&n.length?(v=n==null?void 0:n.split(":"))==null?void 0:v.map(w=>Number(w)):[],C=l==="True",k=o==="True",S=Number(c),T=Number(i),y=Number(F);return{ID:h,Name:s,UnlockGroup:u,Requires:[],BlockedBy:[],RequiredProcesses:m,IngredientProviders:f,isMain:C,isStarterOrSide:k,DishType:S,CustomerMultiplier:T,DishValue:y}}).sort((a,e)=>a.Name<e.Name?-1:1);class P{constructor(e,s){p(this,"fixedSeed");p(this,"instance");p(this,"random");typeof e=="string"&&(e=H(e)),this.fixedSeed=e,this.instance=s,this.random=new z(e+Math.imul(124192293,s))}useSubcontext(e){return new P(this.fixedSeed,124192293*e+this.instance)}}class z{constructor(e){p(this,"seed");const s=o=>Math.imul(1812433253,o)+1>>0,r=e>>0,t=s(r),n=s(t),l=s(n);this.seed=[r,t,n,l]}get value(){let e=this.seed.shift(),s=this.seed[2];return e^=e<<11,e^=e>>>8,s^=s>>>19,s=(s^e)>>0,this.seed.push(s),s}range(e,s){return(this.value>>>0)%(s-e)+e}get valueFloat(){return(this.value<<9>>>0)/4294967295}select(e){return e[this.range(0,e.length)]}}function H(a){const s=new TextEncoder().encode(a);let r=5381,t=s.length;for(;t--;)r=(r<<5)+r+s[t];return r>>0}function E(a,e,s){return new P(s,a*1231231+e)}class I{constructor(){p(this,"encourageGroups",[d.Special])}GetOptions(e,s,r){const t=r.random;let n=0;for(s!==15&&(n=this.getPad(e,s));n--;)t.value;let l=this.sortCandidates(e,s,r.random);const[o,c]=this.getUnlockGroups(s);let i=null,F=null;for(const h of l)if(!(h.UnlockGroup!==o&&h.UnlockGroup!==c)&&(i===null||i.UnlockGroup!==o&&h.UnlockGroup===o?i=h:(F===null||F.UnlockGroup!==c&&h.UnlockGroup===c)&&(F=h),i&&i.UnlockGroup===o&&F&&F.UnlockGroup===c))break;return[i,F]}getPad(e,s){if(s===15)return 0;let r=M(e).length+1;return s===5&&(r*=2),r}getCandidates(e,s){return M(e)}sortCandidates(e,s,r){let t=this.getCandidates(e,s),n=G(t,r);return r.valueFloat<.5&&n.sort((o,c)=>{let i=0;return B(o)&&i--,B(c)&&i++,i}),n}getUnlockGroups(e){return e===15?[d.Franchise,d.Franchise]:e===5?[d.PrimaryTheme,d.PrimaryTheme]:[d.Dish,d.Generic]}}class L extends I{getPad(e,s){let r=M(e,!1).length+1;return s!==5&&(r*=2),r}sortCandidates(e,s,r){let t=this.getCandidates(e,s),n=G(t,r);return r.valueFloat<.1&&n.sort((c,i)=>{let F=0;return c.Requires.length&&F--,i.Requires.length&&F++,F}),n}}class V extends I{constructor(){super(...arguments);p(this,"ThanksgivingCards",["Turkey","Nut Roast"])}getPad(s,r){if(r===15)return 0;let t=M(s,!1).length+1;if(r===5){let n=M(s);t+=n.length+2}return t}getCandidates(s,r){return r===5||r===15?M(s,!1):M(s)}sortCandidates(s,r,t){let n=this.getCandidates(s,r),l=G(n,t);return t.valueFloat<.5&&l.sort((i,F)=>{let h=0;return B(i,!1)&&h--,B(F,!1)&&h++,h}),r!==5&&r!==15&&t.valueFloat<.25&&l.sort((F,h)=>{let u=0;return this.ThanksgivingCards.includes(F.Name)&&u++,this.ThanksgivingCards.includes(h.Name)&&u--,u}),l}getUnlockGroups(s){return s===15?[d.Franchise,d.Franchise]:s===5?[d.PrimaryTheme,d.PrimaryTheme]:[d.Dish,d.Dish]}}function G(a,e){return a.map(r=>[r,e.valueFloat]).sort((r,t)=>r[1]-t[1]).map(r=>r[0])}class j{constructor(e){p(this,"cards");p(this,"unlockPack");p(this,"seed");this.cards=[],this.unlockPack=new I,this.seed=e}addCard(e){if(e!==void 0){switch(e.Name){case"Community":this.unlockPack=new V;break;case"Turbo":this.unlockPack=new L;break}this.cards.push(e)}}getUnlockOptions(e){const r=E(848292,e,this.seed).useSubcontext(1);return this.unlockPack.GetOptions(this.cards,e,r)}getCustomers(e,s=1){return[]}getGroupSizeRange(e){if(this.cards.some(n=>n.Name==="Community")){const n=Math.floor((e-1)/3);return[n+1,n+2]}let r=1,t=2;return this.cards.some(n=>n.Name==="Individual Dining")?[1,1]:(this.cards.some(n=>n.Name==="Medium Groups")&&(r++,t+=2),this.cards.some(n=>n.Name==="Large Groups")&&(r+=2,t+=4),this.cards.some(n=>n.Name==="Flexible Groups")&&(r--,t++),[r,t])}}function B(a,e=!0){return a.UnlockGroup===d.Special||a.DishType===g.Main||a.DishType===g.Extra?!0:e?!!a.Requires.length:!1}const q="bdghjmqrtvwxy346789",_="1c,1d,1e,1f,1g,1h,1i,1j,1k,1l,1m,1n,1o,1p,1q,1r,1s,1t,1u,1v,1w,1x,1y,1z,13,14,15,16,17,18,19,2c,2d,2e,2f,2g,2h,2i,2j,2k,2l,2m,2n,2o,2p,2q,2r,2s,2t,2u,2v,2w,2x,2y,2z,23,24,25,26,27,28,29,3c,3d,3e,3f,3g,3h,3i,3j,3k,3l,3m,3n,3o,3p,3q,3r,3s,3t,3u,3v,3w,3x,3y,3z,33,34,35,36,37,38,39,4c,4d,4e,4f,4g,4h,4i,4j,4k,4l,4m,4n,4o,4p,4q,4r,4s,4t,4u,4v,4w,4x,4y,4z,43,44,45,46,47,48,49,5c,5d,5e,5f,5g,5h,5i,5j,5k,5l,5m,5n,5o,5p,5q,5r,5s,5t,5u,5v,5w,5x,5y,5z,53,54,55,56,57,58,59,6c,6d,6e,6f,6g,6h,6i,6j,6k,6l,6m,6n,6o,6p,6q,6r,6s,6t,6u,6v,6w,6x,6y,6z,63,64,65,66,67,68,69,7c,7d,7e,7f,7g,7h,7i,7j,7k,7l,7m,7n,7o,7p,7q,7r,7s,7t,7u,7v,7w,7x,7y,7z,73,74,75,76,77,78,79,8c,8d,8e,8f,8g,8h,8i,8j,8k,8l,8m,8n,8o,8p,8q,8r,8s,8t,8u,8v,8w,8x,8y,8z,83,84,85,86,87,88,89".split(",");for(const a of _);function Q(){let a="";for(;a.length<8;)a+=q[Math.floor(Math.random()*q.length)];return a}const W={"Diner (1)":1,"Small (2)":2,"Medium (2)":2,"Large (3)":3,"Huge (4)":4};class Y{constructor(e,s=[],r=[]){p(this,"seed");p(this,"mapSize");p(this,"frontDoor");p(this,"startingCards");p(this,"cards");p(this,"playerCount");p(this,"turbo");p(this,"_cardsByDay",[]);this.seed=e,this.mapSize=this.getMapSize(),this.frontDoor=this.getDoorInfo(),this.startingCards=s,this.cards=r,this.playerCount=W[this.mapSize],this.turbo=this.startingCards.some(t=>{if(t===void 0){console.log({startingCards:s});debugger}return t.Name==="Turbo"})}guessMoney(e){if(e===0)return this.turbo?30:0;const s=this.getCardsByDay(e),r=1+s.filter(i=>i.Name==="All You Can Eat"||i.Name==="Double Helpings").length*.25,t=this.getCustomerCount(e)*r;let n=this.startingCards.reduce((i,F)=>i+F.DishValue,0);if(s.some(i=>i.Name==="Ice Cream")&&(this.startingCards.some(i=>i.DishType=g.Dessert)||(n=(n+2)/2)),s.some(i=>i.Name==="Doughnut")&&(n=5),s.some(i=>i.Name==="Double Helpings")&&n&&(n+=3),Number.isNaN(t))debugger;if(Number.isNaN(n))debugger;const l=J(this.playerCount),o=this.getBookingDeskCount(e),c=this.getBookingDeskMoney(e);return l*(t*n+o*c)}getBookingDeskMoney(e){return Math.ceil((e+1)/2)+2}getCardsByDay(e){if(this._cardsByDay[e]===void 0){let s;this.turbo?s=e-1:(s=Math.max(0,Math.floor((e-1)/3)),e>5&&s++),this._cardsByDay[e]=[...this.startingCards,...this.cards.slice(0,s)]}return this._cardsByDay[e]}getBookingDeskCount(e,s=1){const r=Math.ceil(this.getExpectedCustomers(e)/this.getExpectedGroupSize(e));if(this.getCardsByDay(e).some(i=>i.Name==="Herd Mentality"))return Math.min(r,3)+1;const t=[],n=this.getCardsByDay(e);let l=1;(this.turbo||n.some(i=>i.Name==="Morning Rush"))&&(t.push(.2),l++),(this.turbo||n.some(i=>i.Name==="Lunch Rush"))&&(t.push(.5),l++),(this.turbo||n.some(i=>i.Name==="Dinner Rush"))&&(t.push(.8),l++);const o=s/this.getDayLength(e),c=.1/r;for(let i=1;i<r;i++){const F=i/r,h=F-c-o,u=F+c+o;let m=!1;for(const f of t)if(h<=f&&u>=f){m=!0;break}m||l++}return l}getNonRushGroupCount(e){const s=this.getExpectedCustomers(e),r=this.getCardsByDay(e).filter(l=>l.Name==="Closing Time?").length*.2,t=this.getExpectedGroupSize(e),n=s*(1+r)/t;return Math.ceil(n)}getCustomerCount(e){return this.getGroupSizes(e).reduce((s,r)=>s+r,0)}getGroupSizes(e){const s=E(1997821,e,this.seed).random,r=this.getNonRushGroupCount(e),t=this.getCardsByDay(e).some(u=>u.Name==="Herd Mentality");let n=r,l=[],[o,c]=this.getGroupSizeRange(e);{let u=n-1;for(;u--;)s.value}for(;n--;)l.push(s.range(o,c+1)),!t&&n!==r-1&&s.value;let i=this.turbo?3:this.getCardsByDay(e).filter(u=>u.Name.includes(" Rush")).length;const F=Math.ceil(Math.max(1,this.getExpectedCustomers(e)*.15));let h=i*F;for(;h--;)l.push(s.range(o,c+1));return l}getExpectedGroupSize(e){const s=this.getGroupSizeRange(e);return(s[0]+s[1])/2}getGroupSizeRange(e){let s=1,r=2;for(const t of this.getCardsByDay(e))switch(t.Name){case"Individual Dining":r--;break;case"Medium Groups":s++,r+=2;break;case"Large Groups":s+=2,r+=2;break;case"Flexible Dining":s--,r++;break;case"Community":const n=Math.floor((e-1)/3);s+=n,r+=n;break}return[s,r]}getExpectedCustomers(e){const s=this.getReductions(e),r=this.getDayLength(e),t=this.getPlayerModifier(),n=this.getCourseModifier(e),l=this.getDayRate(e),o=this.getCustomersPerHour(e),c=this.getAdvertisingModifier(e);return .85**s*(r/25*l*t)/n*o*c}getAdvertisingModifier(e){return 1+.25*this.getCardsByDay(e).filter(r=>r.Name==="Advertising").length}getDayRate(e){let s=1;switch(e){case 1:s=1.25;break;case 2:s=1.5;break;default:s=1.5+.15*(e-3);break}return e>15&&(s+=(this.turbo?.1:0)*(e-15)**1.5),s}getCourseModifier(e){let s=1;const r=this.getCardsByDay(e);return r.some(t=>t.DishType===g.Dessert||t.Name==="Black Coffee"||t.Name==="Cakes")&&(s+=.25),r.some(t=>t.DishType===g.Starter)&&(s+=.25),s}getPlayerModifier(){let e;switch(this.playerCount){case 0:e=1;break;case 1:e=.8;break;case 2:e=1;break;case 3:e=1.25;break;default:e=1.5;break}return e}getDayLength(e){return 100+Math.floor(e/3)*25}getCustomersPerHour(e){let s=1;return this.turbo&&(s=1.5,s*=1+e/10),s}getReductions(e){return this.getCardsByDay(e).reduce((r,t)=>r+t.CustomerMultiplier,0)}getMapSize(){const s=new P(this.seed,5078598).useSubcontext(0).random.range(0,8);let r;switch(s){case 0:r="Small (2)";break;case 4:r="Medium (2)";break;case 1:case 5:r="Diner (1)";break;case 2:case 6:r="Large (3)";break;case 3:case 7:r="Huge (4)";break;default:throw new Error}return r}getLayoutInfo(){const s=new P(this.seed,5078598).useSubcontext(0).random.range(0,8);let r,t;switch(s){case 0:t=70,r=2;break;case 4:t=84,r=2;break;case 1:case 5:t=60,r=1;break;case 2:case 6:t=9*13,r=3;break;case 3:case 7:t=12*16,r=4;break;default:throw new Error}return[r,t]}getDoorInfo(){if(this.mapSize!=="Diner (1)")return-1;let e=new z(new P(this.seed,98234234).useSubcontext(0).random.value),s=23;for(;s--;)e.value;return e.range(0,4)}}function J(a){switch(a){case 1:return 1.25;case 2:return 1.1;default:return 1}}const x=[3,5,6,9,12],Z=self;Z.onmessage=a=>{let e;const{allowedTables:s,startingDishes:r,mapSettings:t}=a.data.data,n=[...r],l=new j("");for(const o of t)l.addCard(o);switch(a.data.type){case"strict":e=$;break;case"flex":e=ee;break;case"priorityModel":let o=!1;t.some(c=>c.Name==="Community")&&(o=!0),o?e=re:e=se;break;default:throw new Error}for(;n.length;){const o=Q(),c=new Y(o).getMapSize();if(!s.includes(c))continue;l.seed=o;const i=Math.floor(Math.random()*n.length);l.cards=[...t,n[i]],e(l)&&(K({seed:o,mapSize:c,startingDish:n[i].Name}),n.splice(i,1))}};function K(a){X({type:"result",data:a})}function X(a){postMessage(a)}function $(a){let e=[a.cards];for(let s=0;s<5;s++){const r=new Set;let t=[];for(const n of e){a.cards=n;const l=a.getUnlockOptions(x[s]);if(r.add(l[0].Name),r.add(l[1].Name),r.size>2)return!1;t.push([...n,l[0]]),t.push([...n,l[1]])}e=t}return!0}function ee(a){let e=[a.cards];const s=new Set;for(let r=0;r<5;r++){let t=[];for(const n of e){a.cards=n;const l=a.getUnlockOptions(x[r]);if(s.add(l[0].Name),s.add(l[1].Name),s.size>10)return!1;t.push([...n,l[0]]),t.push([...n,l[1]])}e=t}return!0}function se(a){let s=[a.cards];for(let r=0;r<5;r++){let t=[[[]],[[]]],n=[new Set,new Set],l=[new Map,new Map],o=[];for(let c=0;c<s.length;c++){const i=s[c];a.cards=i;const F=x[r],h=a.getUnlockOptions(F);if(F===5){for(const u of[0,1])n[0].add(h[u].ID),o.push([...i,h[u]]);if(n[0].size>2)return!1;continue}for(let u=0;u<=1;u++){const m=h[u];if(o.push([...i,m]),l[u].set(i,m),!n[u].has(m.ID)){n[u].add(m.ID),t[u]=t[u].flatMap(f=>{let C=[];for(let k=0;k<=f.length;k++){const S=[...f];S.splice(k,0,m),C.push(S)}return C});for(let f=0;f<t[u].length;f++){const C=t[u][f];let k=!0;for(let S=0;S<=c;S++){const T=s[S],y=te(a,F,T,C),D=l[u].get(T);if((D==null?void 0:D.ID)!==y.ID){k=!1;break}}k||(t[u].splice(f,1),f--)}if(!t[u].length)return!1}}}s=o}return!0}function re(a){let s=[a.cards];for(let r=0;r<5;r++){let t=[[]],n=new Set,l=new Map,o=[];for(let c=0;c<s.length;c++){const i=s[c];a.cards=i;const F=x[r],h=a.getUnlockOptions(F);l.set(i,h);for(let u=0;u<=1;u++){const m=h[u];o.push([...i,m]),!n.has(m.ID)&&(n.add(m.ID),t=t.flatMap(f=>{let C=[];for(let k=0;k<=f.length;k++){const S=[...f];S.splice(k,0,m),C.push(S)}return C}))}for(let u=0;u<t.length;u++){const m=t[u];let f=!0;for(let C=0;C<=c;C++){const k=s[C],S=ae(a,F,k,m),T=l.get(k);if(!S.some(y=>y.ID===T[0].ID)||!S.some(y=>y.ID===T[1].ID)){f=!1;break}}f||(t.splice(u,1),u--)}if(!t.length)return!1}s=o}return!0}function te(a,e,s,r){const t=a.unlockPack.getCandidates(s,e);for(const n of r)if(t.some(l=>l.ID===n.ID))return n;throw new Error("no valid options")}function ae(a,e,s,r){const t=a.unlockPack.getCandidates(s,e),n=[];for(const l of r)if(t.some(o=>o.ID===l.ID)&&(n.push(l),n.length===2))return n;throw new Error("not enough valid options")}})();
