import{q as _,u as s,g as u}from"./jsxRuntime.module-lz3Tx-bR.js";import{U as d,R as I}from"./unlocks-7WnRp8yW.js";import{h as f,p as W}from"./compat.module-aXJm5aLC.js";import{U as R}from"./UnlockSelect-vvD2NlYF.js";import{u as m}from"./usePersistentState-9AkVLkWN.js";import{V as L}from"./Version-51ERFU1m.js";d.filter(a=>a.Name==="Cakes")[0];const C=[],U=1;for(let a=0;a<U;a++)C.push(new Worker(new URL("/plateup-set-seed-tools/assets/seedSearchWorker-stQjwvkC.js",import.meta.url),{type:"module"}));function p(a){for(const r of C)r.postMessage(a)}const g=[{include:!0,cards:[I.filter(a=>a.Name==="Turbo")[0]]}],D={include:!0,cards:["Ice Cream","Instant Service","All You Can Eat","Victorian Standards","Sedate Atmosphere","Roast Potato","Broccoli","Bamboo","Mashed Potato","Chips","Corn on the Cob","Onion Rings"].flatMap(a=>d.filter(r=>r.Name===a))},j={include:!1,cards:["Apple Pie","Cherry","Pumpkin","Leisurely","Mandarin","Bread","Closing Time","Picky","Medium","Advertising","Cheese ","Soup"].flatMap(a=>d.filter(r=>r.Name.includes(a)))};{let a=1;for(;a<=9;a++)g[a]=a===5?{include:!0,cards:d.filter(r=>r.Name==="Affordable")}:D;for(;a<=14;a++)g[a]=j}const x=()=>{const[a,r]=f(0),[S,y]=m([],"SEED_SEARCHER_RESULTS"),[b,h]=f(!1),[o,k]=m([1,2,3,4],"SEED_SEARCHER_ALLOWED_TABLES"),B=[1,2,3,4];W(()=>{console.log("useEffect registering message done");const e=t=>{const l=t;switch(l.data.type){case"error":break;case"result":const i=l.data.data;y(c=>(c.length>=1/0&&(p({type:"stop"}),h(!1)),[...c,i]));break;case"progress":r(l.data.data);break}};for(const t of C)t.onmessage=e},[]);const E=[];for(let e=1;e<=14;e++)E.push(e);const M=()=>{if(b)p({type:"stop"}),h(!1);else{if(n[0].cards.length<2){alert("No starting dish selected.");return}else n[0].cards.length>2;const e=[];for(let t=1;t<15;t++)(!n[t]||n[t].include&&n[t].cards.length===0)&&e.push(t);if(e.length){e.length>1&&(e[e.length-1]="and "+e[e.length-1]),alert(`Empty card configurations for day${e.length>1?"s":""} `+e.join(e.length>2?", ":" ")+". Add cards, or switch to exclude cards mode.");return}p({type:"start",data:{mapSizes:o,goalCards:n,goalAppliances:H}}),h(!0)}},[n,v]=m(g,"SEED_SEARCHER_CARDS_BY_DAY"),w=e=>t=>{v(l=>{var c;const i=[...l];return e===0&&((c=t.cards[0])==null?void 0:c.Name)!=="Turbo"&&t.cards.splice(0,0,i[e].cards[0]),i[e]=t,i})},[A,N]=f(D),P=e=>{const t=[...n];t[e]={include:A.include,cards:[...A.cards]},v(t)},T=e=>()=>{o.includes(e)?k(o.filter(t=>t!==e)):k([...o,e])};return s(u,{children:[s("div",{style:{maxWidth:"50vw"},children:"When more than one starting dish is selected, the searcher will alternate among all of them"}),s("div",{style:{maxWidth:"50vw"},children:["On include/green card mode, the searcher prioritizes the cards which were added first (e.g. if a seed offers Ice Cream and Herd Mentality on Day N, and Ice Cream is before Herd Mentality in the card list for Day N, the searcher will ",s("i",{children:"always"})," choose Ice Cream.)"]}),s("div",{class:"search-container",children:[s("div",{class:"search-config",children:[s("div",{style:"min-width:fit-content;",children:[s("label",{children:"Starting Tables: "}),B.map(e=>{const t=e+"-table";return s(u,{children:[s("label",{for:t,children:e}),s("input",{id:t,type:"checkbox",onChange:T(e),checked:o.includes(e)})]})})]}),s(u,{children:[s(R,{onSelectionChange:w(0),showSelectionMode:!1,label:"Starting Cards",...n[0],modes:["startingDishes","settings"]}),E.map(e=>s(R,{onSelectionChange:w(e),label:"After Day "+e,showCopyPaste:e!==5,handleCopy:N,handlePaste:()=>P(e),...n[e]??{},modes:e===5?["themes"]:["unlocks"]}))]})]}),s("div",{class:"search-results",children:[s("div",{children:[a," seeds checked"]}),s("button",{onClick:M,children:[b?"Stop":"Start"," Search"]}),s("div",{class:"results",children:[S.length?s("button",{onClick:()=>y([]),children:"Clear Previous Results"}):"",s("div",{children:s("code",{children:"seed (starting tables): cards"})}),S.map(e=>s("div",{children:[e.seed,e.mapSize&&` (${e.mapSize})`,":"," ",s("div",{children:e.cards.join(", ")}),e.blueprints.map(t=>t.Name).join(", ")]}))]})]})]}),s(L,{})]})};_(s(x,{}),document.getElementById("app"));const H=[];
