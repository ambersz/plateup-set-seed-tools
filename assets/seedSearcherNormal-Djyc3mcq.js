import{h as g,p as O,u as t,g as D,a as _}from"./main-BTw1FnPV.js";import{u as i}from"./usePersistentState-C_hAWpJk.js";import{S as B}from"./SeedSearchResult--5MJauvb.js";import{t as H}from"./run-C7QlO-wc.js";const S=[],x=1;for(let r=0;r<x;r++)S.push(new Worker(new URL("/plateup-set-seed-tools/assets/seedSearchWorker-BlvMhBMR.js",import.meta.url),{type:"module"}));function f(r){for(const d of S)d.postMessage(r)}const p=[];for(let r=0;r<12;r++)p.push({include:r!==6&&r!==11,cards:[]});const Y=()=>{const[r,d]=g(0),[h,w]=i(!1,"SEED_SEARCHER_NORMAL_OT15"),[m,y]=i([],"SEED_SEARCHER_NORMAL_RESULTS"),[C,u]=g(!1),[a,b]=i(["Diner (1)","Small (2)","Medium (2)","Large (3)","Huge (4)"],"SEED_SEARCHER_NORMAL_ALLOWED_TABLES",e=>e.flatMap(s=>{if(typeof s=="number")switch(s){case 1:return"Diner (1)";case 2:return["Medium (2)","Small (2)"];case 3:return"Large (3)";case 4:return"Huge (4)"}return s}));O(()=>{console.log("useEffect registering message done");const e=s=>{const o=s;switch(o.data.type){case"error":break;case"result":const c=o.data.data;y(A=>(A.length>=1/0&&(f({type:"stop"}),u(!1)),[...A,c]));break;case"progress":d(o.data.data);break}};for(const s of S)s.onmessage=e},[]);const l=h?[3,5,6,9,12,15,18,21,24,27]:[3,5,6,9,12],M=()=>{if(C)f({type:"stop"}),u(!1);else{if(n[0].cards.length<1){if(!confirm("No starting dish selected. Run search anyway? (If you're doing that ridiculous no food run ðŸ¤£)"))return}else n[0].cards.length>2;const e=[];for(let s=1;s<l.length;s++)(!n[s]||n[s].include&&n[s].cards.length===0)&&e.push(l[s]);if(e.length){e.length>1&&(e[e.length-1]="and "+e[e.length-1]),alert(`Empty card configurations for day${e.length>1?"s":""} `+e.join(e.length>2?", ":" ")+". Add cards, or switch to exclude cards mode.");return}f({type:"start",data:{mapSizes:a,goalCards:n.slice(0,l.length+1),goalAppliances:N}}),u(!0)}},[n,E]=i(p,"SEED_SEARCHER_NORMAL_CARDS_BY_DAY"),R=e=>s=>{E(o=>{const c=[...o];return c[e]=s,c})},v=e=>()=>{a.includes(e)?b(a.filter(s=>s!==e)):b([...a,e])},[k,L]=g(p[1]),T=e=>{const s=[...n];s[e]={include:k.include,cards:[...k.cards]},E(s)};return t("div",{class:"search-container",children:[t("div",{class:"search-config",children:[t("div",{children:[t("label",{for:"ot15",children:"Search until OT15"}),t("input",{type:"checkbox",id:"ot15",onChange:()=>{w(!h)},checked:h})]}),t("div",{style:"min-width:fit-content;",children:[t("label",{children:"Map Layout: "}),H.map(e=>{const s=e+"-table";return t(D,{children:[t("label",{for:s,children:e}),t("input",{id:s,type:"checkbox",onChange:v(e),checked:a.includes(e)})]})})]}),t(D,{children:[t(_,{id:0,onSelectionChange:R(0),showSelectionMode:!1,label:"Starting Cards",...n[0],modes:["startingDishes","settings"]}),l.map((e,s)=>t(_,{id:e,onSelectionChange:R(s+1),label:"After Day "+(e>15?`OT${e-15}`:e),...n[s+1]??{},modes:e===5?["themes"]:e===15?["franchise"]:["unlocks"],showCopyPaste:e!==5&&e!==15,handleCopy:L,handlePaste:()=>T(s+1)}))]})]}),t("div",{class:"search-results",children:[t("div",{children:[t("div",{children:[r," seeds checked"]}),t("button",{onClick:M,children:[C?"Stop":"Start"," Search"]})]}),t("div",{class:"results",children:[m.length?t("button",{onClick:()=>y([]),children:"Clear Previous Results"}):"",t("div",{children:t("code",{children:"seed | map (tables): cards"})}),m.map((e,s)=>t(B,{result:e},s))]})]})]})},N=[];export{Y as default};
