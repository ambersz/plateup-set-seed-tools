import{q as M,u as t,g as u}from"./jsxRuntime.module-cxiL4QXa.js";import{U as d,R as N}from"./unlocks-8mfgXCLy.js";import{h as v,p as T}from"./compat.module-Hy7tfJQd.js";import{U as R}from"./UnlockSelect-qKChER4O.js";import{u as f}from"./usePersistentState-mwP6gbDs.js";import{V as _}from"./Version-cwXygF80.js";d.filter(s=>s.Name==="Cakes")[0];const p=[],P=1;for(let s=0;s<P;s++)p.push(new Worker(new URL("/plateup-set-seed-tools/assets/seedSearchWorker-RYvcPyYz.js",import.meta.url),{type:"module"}));function m(s){for(const a of p)a.postMessage(s)}const g=[{include:!0,cards:[N.filter(s=>s.Name==="Turbo")[0]]}],I={include:!0,cards:["Ice Cream","Instant Service","All You Can Eat","Victorian Standards","Sedate Atmosphere","Roast Potato","Broccoli","Bamboo","Mashed Potato","Chips","Corn on the Cob","Onion Rings"].flatMap(s=>d.filter(a=>a.Name===s))},W={include:!1,cards:["Apple Pie","Cherry","Pumpkin","Leisurely","Mandarin","Bread","Closing Time","Picky","Medium","Advertising","Cheese ","Soup"].flatMap(s=>d.filter(a=>a.Name.includes(s)))};{let s=1;for(;s<=9;s++)g[s]=s===5?{include:!0,cards:d.filter(a=>a.Name==="Affordable")}:I;for(;s<=14;s++)g[s]=W}const L=()=>{const[s,a]=v(0),[C,S]=f([],"SEED_SEARCHER_RESULTS"),[y,h]=v(!1),[o,b]=f([1,2,3,4],"SEED_SEARCHER_ALLOWED_TABLES"),w=[1,2,3,4];T(()=>{console.log("useEffect registering message done");const e=r=>{const i=r;switch(i.data.type){case"error":break;case"result":const l=i.data.data;S(c=>(c.length>=1/0&&(m({type:"stop"}),h(!1)),[...c,l]));break;case"progress":a(i.data.data);break}};for(const r of p)r.onmessage=e},[]);const k=[];for(let e=1;e<=14;e++)k.push(e);const A=()=>{if(y)m({type:"stop"}),h(!1);else{if(n[0].cards.length<2){alert("No starting dish selected.");return}else n[0].cards.length>2;const e=[];for(let r=1;r<15;r++)(!n[r]||n[r].include&&n[r].cards.length===0)&&e.push(r);if(e.length){e.length>1&&(e[e.length-1]="and "+e[e.length-1]),alert(`Empty card configurations for day${e.length>1?"s":""} `+e.join(e.length>2?", ":" ")+". Add cards, or switch to exclude cards mode.");return}m({type:"start",data:{mapSizes:o,goalCards:n,goalAppliances:U}}),h(!0)}},[n,D]=f(g,"SEED_SEARCHER_CARDS_BY_DAY"),E=e=>r=>{D(i=>{var c;const l=[...i];return e===0&&((c=r.cards[0])==null?void 0:c.Name)!=="Turbo"&&r.cards.splice(0,0,l[e].cards[0]),l[e]=r,l})},B=e=>()=>{o.includes(e)?b(o.filter(r=>r!==e)):b([...o,e])};return t(u,{children:[t("div",{style:{maxWidth:"50vw"},children:"When more than one starting dish is selected, the searcher will alternate among all of them"}),t("div",{style:{maxWidth:"50vw"},children:["On include/green card mode, the searcher prioritizes the cards which were added first (e.g. if a seed offers Ice Cream and Herd Mentality on Day N, and Ice Cream is before Herd Mentality in the card list for Day N, the searcher will ",t("i",{children:"always"})," choose Ice Cream.)"]}),t("div",{class:"search-container",children:[t("div",{class:"search-config",children:[t("div",{style:"min-width:fit-content;",children:[t("label",{children:"Starting Tables: "}),w.map(e=>{const r=e+"-table";return t(u,{children:[t("label",{for:r,children:e}),t("input",{id:r,type:"checkbox",onChange:B(e),checked:o.includes(e)})]})})]}),t(u,{children:[t(R,{onSelectionChange:E(0),showSelectionMode:!1,label:"Starting Cards",...n[0],modes:["startingDishes","settings"]}),k.map(e=>t(R,{onSelectionChange:E(e),label:"After Day "+e,...n[e]??{},modes:e===5?["themes"]:["unlocks"]}))]})]}),t("div",{class:"search-results",children:[t("div",{children:[s," seeds checked"]}),t("button",{onClick:A,children:[y?"Stop":"Start"," Search"]}),t("div",{class:"results",children:[C.length?t("button",{onClick:()=>S([]),children:"Clear Previous Results"}):"",t("div",{children:t("code",{children:"seed (starting tables): cards"})}),C.map(e=>t("div",{children:[e.seed,e.mapSize&&` (${e.mapSize})`,":"," ",t("div",{children:e.cards.join(", ")}),e.blueprints.map(r=>r.Name).join(", ")]}))]})]})]}),t(_,{})]})};M(t(L,{}),document.getElementById("app"));const U=[];
