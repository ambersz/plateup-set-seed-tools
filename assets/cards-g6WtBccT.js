var U=Object.defineProperty;var C=(o,e,t)=>e in o?U(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var p=(o,e,t)=>(C(o,typeof e!="symbol"?e+"":e,t),t);import{a,g as f,D as P}from"./unlocks-GKf5w4qn.js";import{F}from"./prng-1rWzft78.js";class g{constructor(){p(this,"encourageGroups",[a.Special])}GetOptions(e,t,r){const n=r.random;let s=0;for(t!==15&&(s=this.getPad(e,t));s--;)n.value;let h=this.sortCandidates(e,t,r.random);const[c,d]=this.getUnlockGroups(t);let i=null,l=null;for(const u of h)if(!(u.UnlockGroup!==c&&u.UnlockGroup!==d)&&(i===null||i.UnlockGroup!==c&&u.UnlockGroup===c?i=u:(l===null||l.UnlockGroup!==d&&u.UnlockGroup===d)&&(l=u),i&&i.UnlockGroup===c&&l&&l.UnlockGroup===d))break;return[i,l]}getPad(e,t){if(t===15)return 0;let r=f(e).length+1;return t===5&&(r*=2),r}sortCandidates(e,t,r){let n=f(e),s=G(n,r);return r.valueFloat<.5&&s.sort((c,d)=>{let i=0;return k(c)&&i--,k(d)&&i++,i}),s}getUnlockGroups(e){return e===15?[a.Franchise,a.Franchise]:e===5?[a.PrimaryTheme,a.PrimaryTheme]:[a.Dish,a.Generic]}}class v extends g{getPad(e,t){let r=f(e,!1).length+1;return t!==5&&(r*=2),r}sortCandidates(e,t,r){let n=f(e),s=G(n,r);return r.valueFloat<.1&&s.sort((c,d)=>{let i=0;return this.encourageGroups.includes(c.UnlockGroup)&&i--,this.encourageGroups.includes(d.UnlockGroup)&&i++,i}),s}}class T extends g{constructor(){super(...arguments);p(this,"ThanksgivingCards",["Turkey","Nut Roast"])}getPad(t,r){if(r===15)return 0;let n=f(t,!1).length+1;if(r===5){let s=f(t);n+=s.length+2}return n}sortCandidates(t,r,n){let s=r===5||r===15?f(t,!1):f(t),h=G(s,n);return n.valueFloat<.5&&h.sort((i,l)=>{let u=0;return k(i,!1)&&u--,k(l,!1)&&u++,u}),r!==5&&r!==15&&n.valueFloat<.25&&h.sort((l,u)=>{let m=0;return this.ThanksgivingCards.includes(l.Name)&&m++,this.ThanksgivingCards.includes(u.Name)&&m--,m}),h}getUnlockGroups(t){return t===15?[a.Franchise,a.Franchise]:t===5?[a.PrimaryTheme,a.PrimaryTheme]:[a.Dish,a.Dish]}}function G(o,e){return o.map(r=>[r,e.valueFloat]).sort((r,n)=>r[1]-n[1]).map(r=>r[0])}class D{constructor(e){p(this,"cards");p(this,"unlockPack");p(this,"seed");this.cards=[],this.unlockPack=new g,this.seed=e}addCard(e){if(e!==void 0){switch(e.Name){case"Community":this.unlockPack=new T;break;case"Turbo":this.unlockPack=new v;break}this.cards.push(e)}}getUnlockOptions(e){const r=y(848292,e,this.seed).useSubcontext(1);return this.unlockPack.GetOptions(this.cards,e,r)}getCustomers(e,t=1){return[]}getGroupSizeRange(e){if(this.cards.some(s=>s.Name==="Community")){const s=Math.floor((e-1)/3);return[s+1,s+2]}let r=1,n=2;return this.cards.some(s=>s.Name==="Individual Dining")?[1,1]:(this.cards.some(s=>s.Name==="Medium Groups")&&(r++,n+=2),this.cards.some(s=>s.Name==="Large Groups")&&(r+=2,n+=4),this.cards.some(s=>s.Name==="Flexible Groups")&&(r--,n++),[r,n])}}function y(o,e,t){return new F(t,o*1231231+e)}function k(o,e=!0){return o.UnlockGroup===a.Special||o.DishType===P.Main||o.DishType===P.Extra?!0:e?!!o.Requires.length:!1}export{D as F};
