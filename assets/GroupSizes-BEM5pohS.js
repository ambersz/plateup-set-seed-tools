import{defaultBranchingRerollConfig as G}from"./branchingRerolls-Y1ADc0jV.js";import{u as R}from"./usePersistentState-Cn2Viepe.js";import{k as w,u as e,g as I,R as N,l as j}from"./main-245-sDHP.js";import{R as x}from"./run-BHZQtlpo.js";import"./GhostBlueprints-CgrHtK5u.js";const O=(u,r)=>{let l=1e4;const i=Math.min(l-1,Math.floor(l*r));let s=[];for(;l--;){const a=_(u);for(let o=0;o<a.length;o++)s[o]||(s[o]=[]),s[o].push(a[o])}return s.map(a=>(a.sort((o,m)=>o-m),a[i]))},_=u=>{let r=0,l=[];for(let i=0;i<=15;i++){const s=u.simulateMoney(i);r+=s,l.push(r)}return l},V=()=>{var B;const u=w(.01),[r,l]=R(G,"BRANCH_CONFIG",t=>{if(typeof t.simpleBPSettings=="boolean"){debugger;return{...t,simpleBPSettings:t.simpleBPSettings?"insideOnly":"full"}}return t}),[i,s]=R(1,"RIG_PLAYER_COUNT"),y=w(),a=[e(I,{})],o=[],m=r.cards.filter(t=>!N.some(h=>h.Name===t.Name)),b=r.cards.filter(t=>N.some(h=>h.Name===t.Name));m.length&&b.push(m[0]);const D=m.slice(1),g=new x(r.seed,b,D),A=()=>{const t=O(g,u.value);y.value=t};g.playerCount=i;let v=0,M=g.guessMoney(0),p=2,f=60;for(let t=0;t<p;t++)f+=10*(t+1);f+=460/2;let S=0,d=[];for(let t=1;t<=15;t++){const h=g.getGroupSizes(t),k=h.reduce((C,n)=>C+n);v+=k;const P=g.guessMoney(t);M+=P;{d.sort((n,c)=>c-n);let C=3;d.length>8&&(C+=3);for(let n=0;n<Math.min(d.length,C);n++)d[n]=Math.ceil(d[n]/2);if(f+=d.reduce((n,c)=>n+c,0),S+=d.length,t!==5){let n=M-f;for(;n>0;){let c=(p+1)*10;if(c+=10,p%8||(c+=60),c>n)break;p++,d.push(30),f+=c,n-=c}}}const F=g.getBookingDeskMoney(t)*g.getBookingDeskCount(t);o.push({i:t,groupSizes:h,customers:k,bookingDeskMoney:F,todayMoney:P,cumulativeFlowers:S,flowers:d,cumulativeMoney:M,simulatedBudget:(B=y==null?void 0:y.value)==null?void 0:B[t]})}for(const t of o)a.push(e(z,{...t}));return e("div",{children:[e("label",{for:"playerCount",children:"Player Count"}),e("input",{id:"playerCount",defaultValue:i.toString(),type:"number",onChange:t=>{const h=t.target;s(Number(h.value))}}),e(j,{onConfigChange:l,config:r,mode:"cards"}),e("div",{children:["Total Customers: ",v]}),e("table",{children:[e("thead",{children:e("tr",{children:[e("td",{children:"Day"}),e("td",{children:"Groups"}),e("td",{children:"Customers"}),e("td",{children:"Booking Desk Money"}),e("td",{children:"Average Money"}),e("td",{children:"Cumulative Money"}),e("td",{children:["Simulated Budget Under Percentile:",e("br",{})," (10k simulations)",e("br",{}),e("input",{type:"number",style:{width:80},step:.005,min:0,max:1,value:u,onChange:t=>u.value=t.target.valueAsNumber,id:"budgetPercentile"}),e("br",{}),e("button",{onClick:A,children:"Run Simulation"})]}),!1,e("td",{children:"All Groups"})]})}),e("tbody",{children:a})]})]})},z=({i:u,groupSizes:r,customers:l,bookingDeskMoney:i,todayMoney:s,cumulativeFlowers:y,flowers:a,cumulativeMoney:o,simulatedBudget:m})=>e("tr",{children:[e("td",{children:u}),e("td",{children:r.length}),e("td",{children:l}),e("td",{children:i}),e("td",{children:Math.round(s)}),e("td",{children:Math.round(o)}),e("td",{children:m}),!1,e("td",{children:r.join(",")})]});export{V as default};
